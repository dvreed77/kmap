(this["webpackJsonphex-map"]=this["webpackJsonphex-map"]||[]).push([[0],{30:function(t,e,n){t.exports=n(39)},35:function(t,e,n){},39:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(25),o=n.n(i),c=(n(35),n(2)),u=n(12),s=n(13),l=n(14),h=n(19),f=n.n(h),v=f.a.mark(y),d=Math.sqrt(3),m=function(t){return!!(t%2)};function y(t,e){var n,a,r,i,o,c,u;return f.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:m(t)?(n=-(t-1)/2-1,a=(t-1)/2+1):(n=-t/2-1,a=t/2+1),m(e)?(r=-(e-1)/2,i=(e-1)/2+1):(r=-e/2,i=e/2+1),o=0,c=n;case 4:if(!(c<a)){s.next=16;break}u=r;case 6:if(!(u<i)){s.next=13;break}return s.next=9,[o,c,u];case 9:o++;case 10:u++,s.next=6;break;case 13:c++,s.next=4;break;case 16:case"end":return s.stop()}}),v)}var P=n(5),p=n(15),k=n(20),g=n(40),b=function(){function t(){Object(s.a)(this,t),this.kPoints=[],this.lines=[];var e=p.b().x((function(t){return t.x})).y((function(t){return t.y}));this.qTree=e}return Object(l.a)(t,[{key:"intitialize",value:function(t,e){this.width=t,this.height=e,this.setup()}},{key:"setup",value:function(){this.F=20,this.H=2*this.F,this.G=d*this.F,this.HEX_W=2*this.G,this.N_HEX_COLS=Math.ceil(this.width/this.HEX_W),this.N_HEX_ROWS=Math.ceil(this.height/(this.F+this.H)),this.genGrid()}},{key:"createKPoint",value:function(t){return Array.isArray(t)&&4===t.length&&(t=Object(k.zipObject)(["ant","bat","cat","dog"],t)),Object(k.find)(this.kPoints,t)}},{key:"genGrid",value:function(){var t=[],e=[],n=!0,a=!1,r=void 0;try{for(var i,o=y(this.N_HEX_COLS,this.N_HEX_ROWS)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var u=i.value,s=Object(c.a)(u,3),l=s[0],h=s[1],f=s[2],v=void 0,d=void 0,P=void 0;m(f)?(v=h*this.HEX_W+this.HEX_W/2,d=(f+1)/2+h,P=(1-f)/2+h):(v=h*this.HEX_W,d=f/2+h,P=h-f/2);for(var p=0;p<6;p++){var k=f,g=p,b=f*(this.F+this.H),E=void 0,w=void 0;if(0===p)E=0,w=0;else{var M=(-30*p+150)*Math.PI/180;m(p)?(E=this.G*Math.cos(M),w=-this.G*Math.sin(M)):(E=this.H*Math.cos(M),w=-this.H*Math.sin(M))}var j=v+E,K=b+w;t.push(O({idx:"".concat(l,".").concat(p),i:h,j:f,x:j,y:K,ant:d,bat:P,cat:k,dog:g},this));for(var x=0;x<12;x++){var H=2*x*Math.PI/12,S=void 0,G=void 0;x%2?(S=this.H*Math.cos(H),G=-this.H*Math.sin(H)):(S=this.G*Math.cos(H),G=-this.G*Math.sin(H)),e.push([[v,b],[v+S,b+G]])}for(var _=0;_<6;_++){var A=(-30*_+150)*Math.PI/180,C=(-30*(_+1)+150)*Math.PI/180,T=void 0,B=void 0,F=void 0,I=void 0;_%2?(T=this.G*Math.cos(A),B=-this.G*Math.sin(A),F=this.H*Math.cos(C),I=-this.H*Math.sin(C)):(T=this.H*Math.cos(A),B=-this.H*Math.sin(A),F=this.G*Math.cos(C),I=-this.G*Math.sin(C)),e.push([[v+T,b+B],[v+F,b+I]])}}}}catch(L){a=!0,r=L}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}this.qTree.addAll(t),this.kPoints=t,this.lines=e}},{key:"getGrid",value:function(){return{pts:this.kPoints,lines:this.lines}}}]),t}(),O=function(t,e){return t.rotate=function(n){var a=t.x,r=t.y,i=Math.sqrt(Math.pow(a,2)+Math.pow(r,2)),o=Math.atan2(r,a)+n,c=i*Math.cos(o),u=i*Math.sin(o);return e.qTree.find(c,u)},t.translate=function(n){var a=n.dAnt,r=void 0===a?0:a,i=n.dBat,o=void 0===i?0:i,c=n.dCat,u=void 0===c?0:c,s=n.dDog,l=void 0===s?0:s;return e.createKPoint({ant:t.ant+r,bat:t.bat+o,cat:t.cat+u,dog:t.dog+l})},t},E=function(){function t(e,n){Object(s.a)(this,t),this.kPoints=e,this.color=n}return Object(l.a)(t,[{key:"tMat",value:function(){var t=this.color.hull,e=this.kPoints,n=t.slice(0,3).map((function(t){return[t.x,t.y]})),a=e.slice(0,3).map((function(t){return[t.x,t.y]}));return Object(P.c)(n,a)}},{key:"copy",value:function(){return new t(this.kPoints,this.color)}},{key:"rotate",value:function(t){return this.kPoints=this.kPoints.map((function(e){return e.rotate(t)})),this}},{key:"translate",value:function(t){return this.kPoints=this.kPoints.map((function(e){return e.translate(t)})),this}},{key:"pathString",value:function(t){var e=p.a(),n=this.kPoints.map((function(t){return[t.x,t.y]})),a=t?Object(P.a)(t,n):n;return a.length&&(e.moveTo(a[0][0],a[0][1]),a.forEach((function(t){var n=Object(c.a)(t,2),a=n[0],r=n[1];return e.lineTo(a,r)})),e.closePath()),e.toString()}}]),t}(),w=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(s.a)(this,t),this.kPolygons=e,this.hull=n}return Object(l.a)(t,[{key:"add",value:function(t){this.kPolygons.push(t)}},{key:"copy",value:function(){return new t(this.kPolygons.map((function(t){return t.copy()})))}},{key:"rotate",value:function(t){return this.kPolygons=this.kPolygons.map((function(e){return e.rotate(t)})),this}},{key:"hullString",value:function(){var t=this.kPolygons.flatMap((function(t){return t.kPoints.map((function(t){return t}))})),e=Object(g.a)(t.map((function(t){return[t.x,t.y,t.idx]})));console.log(t,e,t.find((function(t){return"96.0"===t.idx})));var n=p.a();return this.hull.length&&(n.moveTo(this.hull[0].x,this.hull[0].y),this.hull.forEach((function(t){return n.lineTo(t.x,t.y)})),n.closePath()),n.toString()}},{key:"translate",value:function(t){return this.kPolygons=this.kPolygons.map((function(e){return e.translate(t)})),this}}]),t}(),M=b,j="#F20544",K=r.a.memo((function(t){var e=t.lines;return r.a.createElement(r.a.Fragment,null,e.map((function(t,e){return r.a.createElement("line",{key:e,x1:t[0][0],y1:t[0][1],x2:t[1][0],y2:t[1][1],stroke:"#eee"})})))})),x=r.a.memo((function(t){var e=t.points,n=t.activePoint;return r.a.createElement(r.a.Fragment,null,e.map((function(t,e){return r.a.createElement("circle",{key:e,cx:t.x,cy:t.y,r:3,fill:t===n?j:"#ddd"})})))})),H=function(t){for(var e=new E([t.createKPoint([1,0,1,0]),t.createKPoint([0,-1,1,0]),t.createKPoint([-1,-1,0,0]),t.createKPoint([-1,0,-1,0]),t.createKPoint([0,1,-1,0]),t.createKPoint([1,1,0,0])],"red"),n=new E([t.createKPoint([-2,2,-4,0]),t.createKPoint([-2,0,-2,0]),t.createKPoint([0,2,-2,0])],"green"),a=new E([t.createKPoint([-1,1,-2,0]),t.createKPoint([-2,0,-2,0]),t.createKPoint([-2,-1,-1,0]),t.createKPoint([-1,-1,0,3]),t.createKPoint([-1,0,-1,0]),t.createKPoint([-1,0,-1,5])],"orange"),r=[e,n,a],i=1;i<6;i++)r.push(a.copy().rotate(60*i*Math.PI/180));for(var o=1;o<3;o++)r.push(n.copy().rotate(120*o*Math.PI/180));return new w(r,[t.createKPoint([-2,-4,2,0]),t.createKPoint([-2,2,-4,0]),t.createKPoint([4,2,2,0])])},S=[[-2,-2,0,1],[-2,-2,0,2],[-3,-2,-1,4],[-2,-1,-1,2],[-2,-1,-1,4],[-1,0,-1,2],[-1,0,-1,4],[0,0,0,2],[0,0,0,3],[0,2,-2,0],[-4,-2,-2,0]],G=[[-2,-2,0,0],[-2,-2,0,1],[-2,-2,0,2],[-3,-2,-1,4],[-2,-1,-1,0],[-2,-1,-1,5],[-1,-1,0,2]],_=[[-2,-2,0,0],[-1,-1,0,2],[0,0,0,0]],A=[[0,0,0,0],[-1,-1,0,2],[-2,-1,-1,5],[-1,0,-1,0],[-1,0,-1,4],[0,0,0,2],[0,0,0,3]],C=[[-3,-2,-1,4],[-2,-1,-1,2],[-2,-1,-1,4],[-1,0,-1,2],[-1,0,-1,4],[-1,0,-1,0],[-2,-1,-1,0]],T=function(t){var e=new E(S.map((function(e){return t.createKPoint(e)})),"orange"),n=new E(G.map((function(e){return t.createKPoint(e)})),"blue"),a=new E(_.map((function(e){return t.createKPoint(e)})),"green"),r=new E(A.map((function(e){return t.createKPoint(e)})),"blue"),i=new E(C.map((function(e){return t.createKPoint(e)})),"red");return new w([e,n,a,r,i],[t.createKPoint([-2,-2,0,0]),t.createKPoint([-4,-2,-2,0]),t.createKPoint([0,2,-2,0]),t.createKPoint([0,0,0,0])])},B=function(t){var e=H(t),n=new E([[0,1,-1,0],[0,2,-2,0],[2,2,0,0],[1,1,0,0]].map((function(e){return t.createKPoint(e)})),T(t)),a=[new E([t.createKPoint([0,0,0,0]),t.createKPoint([0,1,-1,0]),t.createKPoint([1,1,0,0])],e),n],r=new w(a,[[0,0,0,0],[2,2,0,0],[0,2,-2,0]].map((function(e){return t.createKPoint(e)})));return new E([[0,0,0,0],[2,2,0,0],[0,2,-2,0]].map((function(e){return t.createKPoint(e)})),r)},F=function(t){for(var e=[B(t)],n=1;n<6;n++)e.push(e[0].copy().rotate(60*n*Math.PI/180));return new E([[2,2,0,0],[0,2,-2,0],[-2,0,-2,0],[-2,-2,0,0],[0,-2,2,0],[2,0,2,0]].map((function(e){return t.createKPoint(e)})),new w(e,[[2,2,0,0],[0,2,-2,0],[-2,0,-2,0],[-2,-2,0,0],[0,-2,2,0],[2,0,2,0]].map((function(e){return t.createKPoint(e)}))))},I=(r.a.memo((function(t){var e=t.kPolygonGroup;t.drawHull;return r.a.createElement("g",null,e.kPolygons.map((function(t,n){return r.a.createElement(I,{key:n,kPolygon:t,tMat:e.tMat})})))})),r.a.memo((function(t){var e,n=t.kPolygon,a=t.tMat;return n.color instanceof w?(e=a?Object(P.b)([a,n.tMat()]):n.tMat(),r.a.createElement(r.a.Fragment,null,n.color.kPolygons.map((function(t,n){return r.a.createElement(I,{key:n,kPolygon:t,tMat:e})})))):r.a.createElement("path",{d:n.pathString(a),fill:n.color,fillOpacity:.4,stroke:"black",strokeWidth:3,strokeLinejoin:"round"})}))),L=function(t){var e=t.mouseOver,n=Object(a.useRef)(null),i=Object(a.useState)({width:800,height:500}),o=Object(c.a)(i,1)[0],s=Object(a.useState)(null),l=Object(c.a)(s,2),h=l[0],f=l[1],v=Object(a.useState)([]),d=Object(c.a)(v,2),m=d[0],y=d[1],P=Object(a.useState)([]),p=Object(c.a)(P,2),k=p[0],g=p[1],b=Object(a.useState)(new M),O=Object(c.a)(b,1)[0],E=Object(a.useState)([]),w=Object(c.a)(E,2),j=w[0],H=w[1],S=Object(a.useState)([]),G=Object(c.a)(S,2),_=G[0],A=G[1],C=function(t){var a=t.x,r=t.y,i=n.current.getBoundingClientRect(),c=i.x,u=i.y,s=O.qTree.find(a-c-o.width/2,r-u-o.height/2);s&&s!==h&&(f(s),e(s))},T=Object(a.useCallback)((function(t){var e=t.x,a=t.y,r=n.current.getBoundingClientRect(),i=r.x,c=r.y,s=O.qTree.find(e-i-o.width/2,a-c-o.height/2);A([].concat(Object(u.a)(_),[s]))}),[_]),B=function(t){"c"===t.key&&A([])};return Object(a.useEffect)((function(){var t=n.current.clientWidth,e=n.current.clientHeight;console.log("KGRID init"),O.intitialize(t,e);var a=n.current;H([F(O),F(O).copy().translate({dAnt:-4,dBat:-2,dCat:-2}),F(O).copy().translate({dAnt:-2,dBat:-4,dCat:2}),F(O).copy().translate({dAnt:4,dBat:2,dCat:2}),F(O).copy().translate({dAnt:2,dBat:4,dCat:-2}),F(O).copy().translate({dAnt:2,dBat:-2,dCat:4})]);var r=O.getGrid(),i=r.pts,o=r.lines;return y(i),g(o),a.addEventListener("mousemove",C),window.addEventListener("keypress",B),function(){a.removeEventListener("mousemove",C),window.removeEventListener("keypress",B)}}),[]),Object(a.useEffect)((function(){var t=n.current;return t.addEventListener("click",T),function(){t.removeEventListener("click",T)}}),[T]),r.a.createElement("div",null,JSON.stringify(_.map((function(t){return[t.ant,t.bat,t.cat,t.dog]}))),r.a.createElement("svg",{ref:n,width:o.width,height:o.height},r.a.createElement("g",{transform:"translate(".concat(o.width/2,", ").concat(o.height/2,")")},r.a.createElement(K,{lines:k}),r.a.createElement(x,{points:m,activePoint:h}),j.map((function(t,e){return r.a.createElement(I,{key:e,kPolygon:t})})))))};var W=function(){var t=Object(a.useState)(null),e=Object(c.a)(t,2),n=e[0],i=e[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"mx-auto mt-10 shadow flex flex-row w-8/12"},r.a.createElement(L,{mouseOver:function(t){i(t)}}),n&&r.a.createElement("ul",null,r.a.createElement("li",null,"ANT: ",n.ant),r.a.createElement("li",null,"BAT: ",n.bat),r.a.createElement("li",null,"CAT: ",n.cat),r.a.createElement("li",null,"DOG: ",n.dog))))};o.a.render(r.a.createElement(W,null),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.b99f32c5.chunk.js.map