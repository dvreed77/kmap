(this["webpackJsonphex-map"]=this["webpackJsonphex-map"]||[]).push([[0],{30:function(t,e,n){t.exports=n(39)},35:function(t,e,n){},39:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(25),o=n.n(i),c=(n(35),n(2)),u=n(12),s=n(13),h=n(14),l=n(19),f=n.n(l),v=f.a.mark(P),d=Math.sqrt(3),m=function(t){return!!(t%2)};function P(t,e){var n,a,r,i,o,c,u;return f.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:m(t)?(n=-(t-1)/2-1,a=(t-1)/2+1):(n=-t/2-1,a=t/2+1),m(e)?(r=-(e-1)/2,i=(e-1)/2+1):(r=-e/2,i=e/2+1),o=0,c=n;case 4:if(!(c<a)){s.next=16;break}u=r;case 6:if(!(u<i)){s.next=13;break}return s.next=9,[o,c,u];case 9:o++;case 10:u++,s.next=6;break;case 13:c++,s.next=4;break;case 16:case"end":return s.stop()}}),v)}var y=n(5),p=n(15),k=n(20),g=n(40),b=function(){function t(){Object(s.a)(this,t),this.kPoints=[],this.lines=[];var e=p.b().x((function(t){return t.x})).y((function(t){return t.y}));this.qTree=e}return Object(h.a)(t,[{key:"intitialize",value:function(t,e){this.width=t,this.height=e,this.setup()}},{key:"setup",value:function(){this.F=20,this.H=2*this.F,this.G=d*this.F,this.HEX_W=2*this.G,this.N_HEX_COLS=Math.ceil(this.width/this.HEX_W),this.N_HEX_ROWS=Math.ceil(this.height/(this.F+this.H)),this.genGrid()}},{key:"createKPoint",value:function(t){return Array.isArray(t)&&4===t.length&&(t=Object(k.zipObject)(["ant","bat","cat","dog"],t)),Object(k.find)(this.kPoints,t)}},{key:"genGrid",value:function(){var t=[],e=[],n=!0,a=!1,r=void 0;try{for(var i,o=P(this.N_HEX_COLS,this.N_HEX_ROWS)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var u=i.value,s=Object(c.a)(u,3),h=s[0],l=s[1],f=s[2],v=void 0,d=void 0,y=void 0;m(f)?(v=l*this.HEX_W+this.HEX_W/2,d=(f+1)/2+l,y=(1-f)/2+l):(v=l*this.HEX_W,d=f/2+l,y=l-f/2);for(var p=0;p<6;p++){var k=f,g=p,b=f*(this.F+this.H),O=void 0,E=void 0;if(0===p)O=0,E=0;else{var K=(-30*p+150)*Math.PI/180;m(p)?(O=this.G*Math.cos(K),E=-this.G*Math.sin(K)):(O=this.H*Math.cos(K),E=-this.H*Math.sin(K))}var M=v+O,j=b+E;t.push(w({idx:"".concat(h,".").concat(p),i:l,j:f,x:M,y:j,ant:d,bat:y,cat:k,dog:g},this));for(var x=0;x<12;x++){var H=2*x*Math.PI/12,S=void 0,G=void 0;x%2?(S=this.H*Math.cos(H),G=-this.H*Math.sin(H)):(S=this.G*Math.cos(H),G=-this.G*Math.sin(H)),e.push([[v,b],[v+S,b+G]])}for(var C=0;C<6;C++){var F=(-30*C+150)*Math.PI/180,_=(-30*(C+1)+150)*Math.PI/180,A=void 0,T=void 0,B=void 0,I=void 0;C%2?(A=this.G*Math.cos(F),T=-this.G*Math.sin(F),B=this.H*Math.cos(_),I=-this.H*Math.sin(_)):(A=this.H*Math.cos(F),T=-this.H*Math.sin(F),B=this.G*Math.cos(_),I=-this.G*Math.sin(_)),e.push([[v+A,b+T],[v+B,b+I]])}}}}catch(L){a=!0,r=L}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}this.qTree.addAll(t),this.kPoints=t,this.lines=e}},{key:"getGrid",value:function(){return{pts:this.kPoints,lines:this.lines}}}]),t}(),w=function(t,e){return t.rotate=function(n){var a=t.x,r=t.y,i=Math.sqrt(Math.pow(a,2)+Math.pow(r,2)),o=Math.atan2(r,a)+n,c=i*Math.cos(o),u=i*Math.sin(o);return e.qTree.find(c,u)},t.translate=function(n){var a=n.dAnt,r=void 0===a?0:a,i=n.dBat,o=void 0===i?0:i,c=n.dCat,u=void 0===c?0:c,s=n.dDog,h=void 0===s?0:s;return e.createKPoint({ant:t.ant+r,bat:t.bat+o,cat:t.cat+u,dog:t.dog+h})},t},O=function(){function t(e,n){Object(s.a)(this,t),this.kPoints=e,this.color=n}return Object(h.a)(t,[{key:"tMat",value:function(){var t=this.color.hull,e=this.kPoints,n=t.slice(0,3).map((function(t){return[t.x,t.y]})),a=e.slice(0,3).map((function(t){return[t.x,t.y]}));return Object(y.c)(n,a)}},{key:"copy",value:function(){return new t(this.kPoints,this.color)}},{key:"rotate",value:function(t){return this.kPoints=this.kPoints.map((function(e){return e.rotate(t)})),this}},{key:"translate",value:function(t){return this.kPoints=this.kPoints.map((function(e){return e.translate(t)})),this}},{key:"pathString",value:function(t){var e=p.a(),n=this.kPoints.map((function(t){return[t.x,t.y]})),a=t?Object(y.a)(t,n):n;return a.length&&(e.moveTo(a[0][0],a[0][1]),a.forEach((function(t){var n=Object(c.a)(t,2),a=n[0],r=n[1];return e.lineTo(a,r)})),e.closePath()),e.toString()}}]),t}(),E=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(s.a)(this,t),this.kPolygons=e,this.hull=n}return Object(h.a)(t,[{key:"add",value:function(t){this.kPolygons.push(t)}},{key:"copy",value:function(){return new t(this.kPolygons.map((function(t){return t.copy()})))}},{key:"rotate",value:function(t){return this.kPolygons=this.kPolygons.map((function(e){return e.rotate(t)})),this}},{key:"hullString",value:function(){var t=this.kPolygons.flatMap((function(t){return t.kPoints.map((function(t){return t}))})),e=Object(g.a)(t.map((function(t){return[t.x,t.y,t.idx]})));console.log(t,e,t.find((function(t){return"96.0"===t.idx})));var n=p.a();return this.hull.length&&(n.moveTo(this.hull[0].x,this.hull[0].y),this.hull.forEach((function(t){return n.lineTo(t.x,t.y)})),n.closePath()),n.toString()}},{key:"translate",value:function(t){return this.kPolygons=this.kPolygons.map((function(e){return e.translate(t)})),this}}]),t}(),K=b,M="#F20544",j="#F2528D",x="#1C418C",H="#F2B705",S="#F29F05",G="#F2C2C2",C=(r.a.memo((function(t){var e=t.lines;return r.a.createElement(r.a.Fragment,null,e.map((function(t,e){return r.a.createElement("line",{key:e,x1:t[0][0],y1:t[0][1],x2:t[1][0],y2:t[1][1],stroke:"#eee"})})))})),r.a.memo((function(t){var e=t.points,n=t.activePoint;return r.a.createElement(r.a.Fragment,null,e.map((function(t,e){return r.a.createElement("circle",{key:e,cx:t.x,cy:t.y,r:3,fill:t===n?M:"#ddd"})})))})),function(t){for(var e=new O([t.createKPoint([1,0,1,0]),t.createKPoint([0,-1,1,0]),t.createKPoint([-1,-1,0,0]),t.createKPoint([-1,0,-1,0]),t.createKPoint([0,1,-1,0]),t.createKPoint([1,1,0,0])],j),n=new O([t.createKPoint([-2,2,-4,0]),t.createKPoint([-2,0,-2,0]),t.createKPoint([0,2,-2,0])],x),a=new O([t.createKPoint([-1,1,-2,0]),t.createKPoint([-2,0,-2,0]),t.createKPoint([-2,-1,-1,0]),t.createKPoint([-1,-1,0,3]),t.createKPoint([-1,0,-1,0]),t.createKPoint([-1,0,-1,5])],H),r=[e,n,a],i=1;i<6;i++)r.push(a.copy().rotate(60*i*Math.PI/180));for(var o=1;o<3;o++)r.push(n.copy().rotate(120*o*Math.PI/180));return new E(r,[t.createKPoint([-2,-4,2,0]),t.createKPoint([-2,2,-4,0]),t.createKPoint([4,2,2,0])])}),F=[[-3,-2,-1,4],[-3,-1,-2,0],[-1,1,-2,0],[-1,0,-1,4],[-1,0,-1,2],[-2,-1,-1,4],[-2,-1,-1,2]],_=[[-2,-2,0,0],[-2,-2,0,1],[-2,-2,0,2],[-3,-2,-1,4],[-2,-1,-1,0],[-2,-1,-1,5],[-1,-1,0,2]],A=[[-2,-2,0,0],[-1,-1,0,2],[0,0,0,0]],T=[[0,0,0,0],[-1,-1,0,2],[-2,-1,-1,5],[-1,0,-1,0],[-1,0,-1,4],[0,0,0,2],[0,0,0,3]],B=[[-3,-2,-1,4],[-2,-1,-1,2],[-2,-1,-1,4],[-1,0,-1,2],[-1,0,-1,4],[-1,0,-1,0],[-2,-1,-1,0]],I=function(t){var e=new O(F.map((function(e){return t.createKPoint(e)})),j),n=new O(_.map((function(e){return t.createKPoint(e)})),x),a=new O(A.map((function(e){return t.createKPoint(e)})),H),r=new O(T.map((function(e){return t.createKPoint(e)})),S),i=new O(B.map((function(e){return t.createKPoint(e)})),G);return new E([e,n,a,r,i],[t.createKPoint([-2,-2,0,0]),t.createKPoint([-4,-2,-2,0]),t.createKPoint([0,2,-2,0]),t.createKPoint([0,0,0,0])])},L=function(t){var e=C(t),n=new O([[0,1,-1,0],[0,2,-2,0],[2,2,0,0],[1,1,0,0]].map((function(e){return t.createKPoint(e)})),I(t)),a=[new O([t.createKPoint([0,0,0,0]),t.createKPoint([0,1,-1,0]),t.createKPoint([1,1,0,0])],e),n],r=new E(a,[[0,0,0,0],[2,2,0,0],[0,2,-2,0]].map((function(e){return t.createKPoint(e)})));return new O([[0,0,0,0],[2,2,0,0],[0,2,-2,0]].map((function(e){return t.createKPoint(e)})),r)},W=function(t){for(var e=[L(t)],n=1;n<6;n++)e.push(e[0].copy().rotate(60*n*Math.PI/180));return new O([[2,2,0,0],[0,2,-2,0],[-2,0,-2,0],[-2,-2,0,0],[0,-2,2,0],[2,0,2,0]].map((function(e){return t.createKPoint(e)})),new E(e,[[2,2,0,0],[0,2,-2,0],[-2,0,-2,0],[-2,-2,0,0],[0,-2,2,0],[2,0,2,0]].map((function(e){return t.createKPoint(e)}))))},X=(r.a.memo((function(t){var e=t.kPolygonGroup;t.drawHull;return r.a.createElement("g",null,e.kPolygons.map((function(t,n){return r.a.createElement(X,{key:n,kPolygon:t,tMat:e.tMat})})))})),r.a.memo((function(t){var e,n=t.kPolygon,a=t.tMat;return n.color instanceof E?(e=a?Object(y.b)([a,n.tMat()]):n.tMat(),r.a.createElement(r.a.Fragment,null,n.color.kPolygons.map((function(t,n){return r.a.createElement(X,{key:n,kPolygon:t,tMat:e})})))):r.a.createElement("path",{d:n.pathString(a),fill:n.color,fillOpacity:1,stroke:"black",strokeWidth:3,strokeLinejoin:"round"})}))),q=function(t){var e=t.mouseOver,n=Object(a.useRef)(null),i=Object(a.useState)({width:800,height:500}),o=Object(c.a)(i,1)[0],s=Object(a.useState)(null),h=Object(c.a)(s,2),l=h[0],f=h[1],v=Object(a.useState)([]),d=Object(c.a)(v,2),m=(d[0],d[1]),P=Object(a.useState)([]),y=Object(c.a)(P,2),p=(y[0],y[1]),k=Object(a.useState)(new K),g=Object(c.a)(k,1)[0],b=Object(a.useState)([]),w=Object(c.a)(b,2),M=w[0],j=w[1],x=Object(a.useState)([]),H=Object(c.a)(x,2),S=H[0],C=H[1],F=function(t){var a=t.x,r=t.y,i=n.current.getBoundingClientRect(),c=i.x,u=i.y,s=g.qTree.find(a-c-o.width/2,r-u-o.height/2);s&&s!==l&&(f(s),e(s))},_=Object(a.useCallback)((function(t){var e=t.x,a=t.y,r=n.current.getBoundingClientRect(),i=r.x,c=r.y,s=g.qTree.find(e-i-o.width/2,a-c-o.height/2);C([].concat(Object(u.a)(S),[s]))}),[S]),A=function(t){"c"===t.key&&C([])};return Object(a.useEffect)((function(){var t=n.current.clientWidth,e=n.current.clientHeight;console.log("KGRID init"),g.intitialize(t,e);for(var a=n.current,r=new O([[-5,-6,1,4],[-5,-6,1,2],[-7,-5,-2,4],[-6,-4,-2,2],[-4,-3,-1,4],[-3,-3,0,2]].map((function(t){return g.createKPoint(t)})),G),i=new E([r],[[-5,-6,1,0],[-7,-4,-3,0],[-3,-2,-1,0]].map((function(t){return g.createKPoint(t)}))),o=[new O([[1,1,0,0],[2,3,-1,0],[3,2,1,0]].map((function(t){return g.createKPoint(t)})),i)],c=1;c<6;c++)o.push(o[0].copy().rotate(60*c*Math.PI/180));j([W(g),W(g).copy().translate({dAnt:-4,dBat:-2,dCat:-2}),W(g).copy().translate({dAnt:-2,dBat:-4,dCat:2}),W(g).copy().translate({dAnt:4,dBat:2,dCat:2}),W(g).copy().translate({dAnt:2,dBat:4,dCat:-2}),W(g).copy().translate({dAnt:2,dBat:-2,dCat:4})].concat(o));var u=g.getGrid(),s=u.pts,h=u.lines;return m(s),p(h),a.addEventListener("mousemove",F),window.addEventListener("keypress",A),function(){a.removeEventListener("mousemove",F),window.removeEventListener("keypress",A)}}),[]),Object(a.useEffect)((function(){var t=n.current;return t.addEventListener("click",_),function(){t.removeEventListener("click",_)}}),[_]),r.a.createElement("div",null,JSON.stringify(S.map((function(t){return[t.ant,t.bat,t.cat,t.dog]}))),r.a.createElement("svg",{ref:n,width:o.width,height:o.height},r.a.createElement("g",{transform:"translate(".concat(o.width/2,", ").concat(o.height/2,")")},M.map((function(t,e){return r.a.createElement(X,{key:e,kPolygon:t})})))))};var N=function(){var t=Object(a.useState)(null),e=Object(c.a)(t,2),n=e[0],i=e[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"mx-auto mt-10 shadow flex flex-row w-8/12"},r.a.createElement(q,{mouseOver:function(t){i(t)}}),n&&r.a.createElement("ul",null,r.a.createElement("li",null,"ANT: ",n.ant),r.a.createElement("li",null,"BAT: ",n.bat),r.a.createElement("li",null,"CAT: ",n.cat),r.a.createElement("li",null,"DOG: ",n.dog))))};o.a.render(r.a.createElement(N,null),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.5cf7d61e.chunk.js.map