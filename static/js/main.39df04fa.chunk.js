(this["webpackJsonphex-map"]=this["webpackJsonphex-map"]||[]).push([[0],{28:function(t,e,n){t.exports=n(37)},33:function(t,e,n){},37:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),r=n(23),o=n.n(r),c=(n(33),n(2)),s=n(10),u=n(11),l=n(16),h=n.n(l),f=h.a.mark(P),v=Math.sqrt(3),y=function(t){return!!(t%2)};function P(t,e){var n,a,i,r,o,c,s;return h.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:y(t)?(n=-(t-1)/2-1,a=(t-1)/2+1):(n=-t/2-1,a=t/2+1),y(e)?(i=-(e-1)/2,r=(e-1)/2+1):(i=-e/2,r=e/2+1),o=0,c=n;case 4:if(!(c<a)){u.next=16;break}s=i;case 6:if(!(s<r)){u.next=13;break}return u.next=9,[o,c,s];case 9:o++;case 10:s++,u.next=6;break;case 13:c++,u.next=4;break;case 16:case"end":return u.stop()}}),f)}var d=n(18),m=n(12),p=n(17),k=n(38),g=function(){function t(){Object(s.a)(this,t),this.kPoints=[],this.lines=[];var e=m.b().x((function(t){return t.x})).y((function(t){return t.y}));this.qTree=e}return Object(u.a)(t,[{key:"intitialize",value:function(t,e){this.width=t,this.height=e,this.setup()}},{key:"setup",value:function(){this.F=20,this.H=2*this.F,this.G=v*this.F,this.HEX_W=2*this.G,this.N_HEX_COLS=Math.ceil(this.width/this.HEX_W),this.N_HEX_ROWS=Math.ceil(this.height/(this.F+this.H)),this.genGrid()}},{key:"createKPoint",value:function(t){return Array.isArray(t)&&4===t.length&&(t=Object(p.zipObject)(["ant","bat","cat","dog"],t)),Object(p.find)(this.kPoints,t)}},{key:"genGrid",value:function(){var t=[],e=[],n=!0,a=!1,i=void 0;try{for(var r,o=P(this.N_HEX_COLS,this.N_HEX_ROWS)[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value,u=Object(c.a)(s,3),l=u[0],h=u[1],f=u[2],v=void 0,d=void 0,m=void 0;y(f)?(v=h*this.HEX_W+this.HEX_W/2,d=(f+1)/2+h,m=(1-f)/2+h):(v=h*this.HEX_W,d=f/2+h,m=h-f/2);for(var p=0;p<6;p++){var k=f,g=p,M=f*(this.F+this.H),E=void 0,x=void 0;if(0===p)E=0,x=0;else{var O=(-30*p+150)*Math.PI/180;y(p)?(E=this.G*Math.cos(O),x=-this.G*Math.sin(O)):(E=this.H*Math.cos(O),x=-this.H*Math.sin(O))}var j=v+E,w=M+x;t.push(b({idx:"".concat(l,".").concat(p),i:h,j:f,x:j,y:w,ant:d,bat:m,cat:k,dog:g},this));for(var K=0;K<12;K++){var H=2*K*Math.PI/12,G=void 0,S=void 0;K%2?(G=this.H*Math.cos(H),S=-this.H*Math.sin(H)):(G=this.G*Math.cos(H),S=-this.G*Math.sin(H)),e.push([[v,M],[v+G,M+S]])}for(var _=0;_<6;_++){var T=(-30*_+150)*Math.PI/180,F=(-30*(_+1)+150)*Math.PI/180,I=void 0,W=void 0,X=void 0,q=void 0;_%2?(I=this.G*Math.cos(T),W=-this.G*Math.sin(T),X=this.H*Math.cos(F),q=-this.H*Math.sin(F)):(I=this.H*Math.cos(T),W=-this.H*Math.sin(T),X=this.G*Math.cos(F),q=-this.G*Math.sin(F)),e.push([[v+I,M+W],[v+X,M+q]])}}}}catch(A){a=!0,i=A}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}this.qTree.addAll(t),this.kPoints=t,this.lines=e}},{key:"getGrid",value:function(){return{pts:this.kPoints,lines:this.lines}}}]),t}(),b=function(t,e){return t.rotate=function(n){var a=t.x,i=t.y,r=Math.sqrt(Math.pow(a,2)+Math.pow(i,2)),o=Math.atan2(i,a)+n,c=r*Math.cos(o),s=r*Math.sin(o);return e.qTree.find(c,s)},t.translate=function(n){var a=n.dAnt,i=void 0===a?0:a,r=n.dBat,o=void 0===r?0:r,c=n.dCat,s=void 0===c?0:c,u=n.dDog,l=void 0===u?0:u;return e.createKPoint({ant:t.ant+i,bat:t.bat+o,cat:t.cat+s,dog:t.dog+l})},t},M=function(){function t(e,n){Object(s.a)(this,t),this.kPoints=e,this.color=n}return Object(u.a)(t,[{key:"tMat",value:function(){var t=this.color.hull,e=this.kPoints,n=t.slice(0,3).map((function(t){return[t.x,t.y]})),a=e.slice(0,3).map((function(t){return[t.x,t.y]}));return Object(d.b)(n,a)}},{key:"copy",value:function(){return new t(this.kPoints,this.color)}},{key:"rotate",value:function(t){return this.kPoints=this.kPoints.map((function(e){return e.rotate(t)})),this}},{key:"translate",value:function(t){return this.kPoints=this.kPoints.map((function(e){return e.translate(t)})),this}},{key:"pathString",value:function(t){var e=m.a(),n=this.kPoints.map((function(t){return[t.x,t.y]})),a=t?Object(d.a)(t,n):n;return a.length&&(e.moveTo(a[0][0],a[0][1]),a.forEach((function(t){var n=Object(c.a)(t,2),a=n[0],i=n[1];return e.lineTo(a,i)})),e.closePath()),e.toString()}}]),t}(),E=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(s.a)(this,t),this.kPolygons=e,this.hull=n}return Object(u.a)(t,[{key:"add",value:function(t){this.kPolygons.push(t)}},{key:"copy",value:function(){return new t(this.kPolygons.map((function(t){return t.copy()})))}},{key:"rotate",value:function(t){return this.kPolygons=this.kPolygons.map((function(e){return e.rotate(t)})),this}},{key:"hullString",value:function(){var t=this.kPolygons.flatMap((function(t){return t.kPoints.map((function(t){return t}))})),e=Object(k.a)(t.map((function(t){return[t.x,t.y,t.idx]})));console.log(t,e,t.find((function(t){return"96.0"===t.idx})));var n=m.a();return this.hull.length&&(n.moveTo(this.hull[0].x,this.hull[0].y),this.hull.forEach((function(t){return n.lineTo(t.x,t.y)})),n.closePath()),n.toString()}},{key:"translate",value:function(t){return this.kPolygons=this.kPolygons.map((function(e){return e.translate(t)})),this}}]),t}(),x=g,O="#F20544",j=i.a.memo((function(t){var e=t.lines;return i.a.createElement(i.a.Fragment,null,e.map((function(t,e){return i.a.createElement("line",{key:e,x1:t[0][0],y1:t[0][1],x2:t[1][0],y2:t[1][1],stroke:"#eee"})})))})),w=i.a.memo((function(t){var e=t.points,n=t.activePoint;return i.a.createElement(i.a.Fragment,null,e.map((function(t,e){return i.a.createElement("circle",{key:e,cx:t.x,cy:t.y,r:3,fill:t===n?O:"#ddd"})})))})),K=[{type:"KPolygon",kPoints:[[1,0,1,0],[0,-1,1,0],[-1,-1,0,0],[-1,0,-1,0],[0,1,-1,0],[1,1,0,0]],color:"red"},{type:"KPolygon",kPoints:[[-2,2,-4,0],[-2,0,-2,0],[0,2,-2,0]],color:"green",actions:[[["duplicate"],["rotate",60*Math.PI/180]]]},{type:"KPolygon",kPoints:[[-1,1,-2,0],[-2,0,-2,0],[-2,-1,-1,0],[-1,-1,0,3],[-1,0,-1,0],[-1,0,-1,5]],color:"orange"}],H=new x,G=i.a.memo((function(t){var e=t.kPolygonGroup;t.drawHull;return i.a.createElement("g",null,e.kPolygons.map((function(t,n){return i.a.createElement(S,{key:n,kPolygon:t,tMat:e.tMat})})))})),S=i.a.memo((function(t){var e=t.kPolygon,n=t.tMat;if(e.color instanceof E){var a=e.tMat();return i.a.createElement(i.a.Fragment,null,e.color.kPolygons.map((function(t,e){return i.a.createElement(S,{key:e,kPolygon:t,tMat:a})})))}return i.a.createElement("path",{d:e.pathString(n),fill:e.color,fillOpacity:.4,stroke:"black",strokeWidth:3,strokeLinejoin:"round"})})),_=function(t){var e=t.mouseOver,n=Object(a.useRef)(null),r=Object(a.useState)({width:800,height:500}),o=Object(c.a)(r,1)[0],s=Object(a.useState)(null),u=Object(c.a)(s,2),l=u[0],h=u[1],f=Object(a.useState)([]),v=Object(c.a)(f,2),y=v[0],P=v[1],d=Object(a.useState)([]),m=Object(c.a)(d,2),p=m[0],k=m[1],g=Object(a.useState)([]),b=Object(c.a)(g,2),x=(b[0],b[1]),O=Object(a.useState)([]),S=Object(c.a)(O,2),_=S[0],T=S[1],F=function(t){var a=t.x,i=t.y,r=n.current.getBoundingClientRect(),c=r.x,s=r.y,u=H.qTree.find(a-c-o.width/2,i-s-o.height/2);u&&u!==l&&(h(u),e(u))};return Object(a.useEffect)((function(){var t=n.current.clientWidth,e=n.current.clientHeight;H.intitialize(t,e);for(var a=n.current,i=K.map((function(t){var e=t.kPoints,n=t.color;return new M(e.map((function(t){return H.createKPoint(t)})),n)})),r=1;r<6;r++)i.push(i[2].copy().rotate(60*r*Math.PI/180));for(var o=1;o<3;o++)i.push(i[1].copy().rotate(120*o*Math.PI/180));for(var c=new E(i,[H.createKPoint([-2,-4,2,0]),H.createKPoint([-2,2,-4,0]),H.createKPoint([4,2,2,0])]),s=new M([H.createKPoint([0,1,-1,0]),H.createKPoint([0,2,-2,0]),H.createKPoint([1,1,0,2]),H.createKPoint([2,2,0,0]),H.createKPoint([1,1,0,0])],"orange"),u=new M([H.createKPoint([0,2,-2,0]),H.createKPoint([2,2,0,0]),H.createKPoint([1,1,0,2])],"blue"),l=[new M([H.createKPoint([0,0,0,0]),H.createKPoint([0,1,-1,0]),H.createKPoint([1,1,0,0])],c),s,u],h=[new E(l,[H.createKPoint([0,0,0,0]),H.createKPoint([0,2,-2,0]),H.createKPoint([2,2,0,0])])],f=1;f<6;f++)h.push(h[0].copy().rotate(60*f*Math.PI/180));x([c]),T(h);var v=H.createKPoint([0,0,0,0]),y=H.createKPoint([0,1,-1,0]),d=Math.sqrt(Math.pow(y.x-v.x,2)+Math.pow(y.y-v.y,2)),m=H.createKPoint([-2,-4,2,0]),p=H.createKPoint([-2,2,-4,0]),g=Math.sqrt(Math.pow(p.x-m.x,2)+Math.pow(p.y-m.y,2));console.log("LEN",d,g,g/d);var b=H.createKPoint([-2,-4,2,0]),O=H.createKPoint([0,0,0,0]),j=O.x-b.x,w=O.y-b.y;console.log(j,w);var G=H.getGrid(),S=G.pts,_=G.lines;return P(S),k(_),a.addEventListener("mousemove",F),function(){a.removeEventListener("mousemove",F)}}),[]),i.a.createElement("div",null,i.a.createElement("svg",{ref:n,width:o.width,height:o.height},i.a.createElement("g",{transform:"translate(".concat(o.width/2,", ").concat(o.height/2,")")},i.a.createElement(j,{lines:p}),i.a.createElement(w,{points:y,activePoint:l}),_.map((function(t,e){return i.a.createElement(G,{key:e,kPolygonGroup:t})})))))};var T=function(){var t=Object(a.useState)(null),e=Object(c.a)(t,2),n=e[0],r=e[1];return i.a.createElement("div",null,i.a.createElement("div",{className:"mx-auto mt-10 shadow flex flex-row w-8/12"},i.a.createElement(_,{mouseOver:function(t){r(t)}}),n&&i.a.createElement("ul",null,i.a.createElement("li",null,"ANT: ",n.ant),i.a.createElement("li",null,"BAT: ",n.bat),i.a.createElement("li",null,"CAT: ",n.cat),i.a.createElement("li",null,"DOG: ",n.dog))))};o.a.render(i.a.createElement(T,null),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.39df04fa.chunk.js.map