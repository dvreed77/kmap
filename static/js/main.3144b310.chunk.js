(this["webpackJsonphex-map"]=this["webpackJsonphex-map"]||[]).push([[0],{30:function(t,e,n){t.exports=n(39)},35:function(t,e,n){},39:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),r=n(25),o=n.n(r),c=(n(35),n(2)),u=n(11),s=n(12),l=n(13),h=n(18),f=n.n(h),v=f.a.mark(m),P=Math.sqrt(3),d=function(t){return!!(t%2)};function m(t,e){var n,a,i,r,o,c,u;return f.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:d(t)?(n=-(t-1)/2-1,a=(t-1)/2+1):(n=-t/2-1,a=t/2+1),d(e)?(i=-(e-1)/2,r=(e-1)/2+1):(i=-e/2,r=e/2+1),o=0,c=n;case 4:if(!(c<a)){s.next=16;break}u=i;case 6:if(!(u<r)){s.next=13;break}return s.next=9,[o,c,u];case 9:o++;case 10:u++,s.next=6;break;case 13:c++,s.next=4;break;case 16:case"end":return s.stop()}}),v)}var y=n(20),k=n(14),g=n(19),p=n(40),b=function(){function t(){Object(s.a)(this,t),this.kPoints=[],this.lines=[];var e=k.b().x((function(t){return t.x})).y((function(t){return t.y}));this.qTree=e}return Object(l.a)(t,[{key:"intitialize",value:function(t,e){this.width=t,this.height=e,this.setup()}},{key:"setup",value:function(){this.F=20,this.H=2*this.F,this.G=P*this.F,this.HEX_W=2*this.G,this.N_HEX_COLS=Math.ceil(this.width/this.HEX_W),this.N_HEX_ROWS=Math.ceil(this.height/(this.F+this.H)),this.genGrid()}},{key:"createKPoint",value:function(t){return Array.isArray(t)&&4===t.length&&(t=Object(g.zipObject)(["ant","bat","cat","dog"],t)),Object(g.find)(this.kPoints,t)}},{key:"genGrid",value:function(){var t=[],e=[],n=!0,a=!1,i=void 0;try{for(var r,o=m(this.N_HEX_COLS,this.N_HEX_ROWS)[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var u=r.value,s=Object(c.a)(u,3),l=s[0],h=s[1],f=s[2],v=void 0,P=void 0,y=void 0;d(f)?(v=h*this.HEX_W+this.HEX_W/2,P=(f+1)/2+h,y=(1-f)/2+h):(v=h*this.HEX_W,P=f/2+h,y=h-f/2);for(var k=0;k<6;k++){var g=f,p=k,b=f*(this.F+this.H),E=void 0,O=void 0;if(0===k)E=0,O=0;else{var w=(-30*k+150)*Math.PI/180;d(k)?(E=this.G*Math.cos(w),O=-this.G*Math.sin(w)):(E=this.H*Math.cos(w),O=-this.H*Math.sin(w))}var M=v+E,j=b+O;t.push(K({idx:"".concat(l,".").concat(k),i:h,j:f,x:M,y:j,ant:P,bat:y,cat:g,dog:p},this));for(var x=0;x<12;x++){var H=2*x*Math.PI/12,S=void 0,G=void 0;x%2?(S=this.H*Math.cos(H),G=-this.H*Math.sin(H)):(S=this.G*Math.cos(H),G=-this.G*Math.sin(H)),e.push([[v,b],[v+S,b+G]])}for(var _=0;_<6;_++){var T=(-30*_+150)*Math.PI/180,I=(-30*(_+1)+150)*Math.PI/180,F=void 0,L=void 0,W=void 0,X=void 0;_%2?(F=this.G*Math.cos(T),L=-this.G*Math.sin(T),W=this.H*Math.cos(I),X=-this.H*Math.sin(I)):(F=this.H*Math.cos(T),L=-this.H*Math.sin(T),W=this.G*Math.cos(I),X=-this.G*Math.sin(I)),e.push([[v+F,b+L],[v+W,b+X]])}}}}catch(q){a=!0,i=q}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}this.qTree.addAll(t),this.kPoints=t,this.lines=e}},{key:"getGrid",value:function(){return{pts:this.kPoints,lines:this.lines}}}]),t}(),K=function(t,e){return t.rotate=function(n){var a=t.x,i=t.y,r=Math.sqrt(Math.pow(a,2)+Math.pow(i,2)),o=Math.atan2(i,a)+n,c=r*Math.cos(o),u=r*Math.sin(o);return e.qTree.find(c,u)},t.translate=function(n){var a=n.dAnt,i=void 0===a?0:a,r=n.dBat,o=void 0===r?0:r,c=n.dCat,u=void 0===c?0:c,s=n.dDog,l=void 0===s?0:s;return e.createKPoint({ant:t.ant+i,bat:t.bat+o,cat:t.cat+u,dog:t.dog+l})},t},E=function(){function t(e,n){Object(s.a)(this,t),this.kPoints=e,this.color=n}return Object(l.a)(t,[{key:"tMat",value:function(){var t=this.color.hull,e=this.kPoints,n=t.slice(0,3).map((function(t){return[t.x,t.y]})),a=e.slice(0,3).map((function(t){return[t.x,t.y]}));return Object(y.b)(n,a)}},{key:"copy",value:function(){return new t(this.kPoints,this.color)}},{key:"rotate",value:function(t){return this.kPoints=this.kPoints.map((function(e){return e.rotate(t)})),this}},{key:"translate",value:function(t){return this.kPoints=this.kPoints.map((function(e){return e.translate(t)})),this}},{key:"pathString",value:function(t){var e=k.a(),n=this.kPoints.map((function(t){return[t.x,t.y]})),a=t?Object(y.a)(t,n):n;return a.length&&(e.moveTo(a[0][0],a[0][1]),a.forEach((function(t){var n=Object(c.a)(t,2),a=n[0],i=n[1];return e.lineTo(a,i)})),e.closePath()),e.toString()}}]),t}(),O=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(s.a)(this,t),this.kPolygons=e,this.hull=n}return Object(l.a)(t,[{key:"add",value:function(t){this.kPolygons.push(t)}},{key:"copy",value:function(){return new t(this.kPolygons.map((function(t){return t.copy()})))}},{key:"rotate",value:function(t){return this.kPolygons=this.kPolygons.map((function(e){return e.rotate(t)})),this}},{key:"hullString",value:function(){var t=this.kPolygons.flatMap((function(t){return t.kPoints.map((function(t){return t}))})),e=Object(p.a)(t.map((function(t){return[t.x,t.y,t.idx]})));console.log(t,e,t.find((function(t){return"96.0"===t.idx})));var n=k.a();return this.hull.length&&(n.moveTo(this.hull[0].x,this.hull[0].y),this.hull.forEach((function(t){return n.lineTo(t.x,t.y)})),n.closePath()),n.toString()}},{key:"translate",value:function(t){return this.kPolygons=this.kPolygons.map((function(e){return e.translate(t)})),this}}]),t}(),w=b,M="#F20544",j=i.a.memo((function(t){var e=t.lines;return i.a.createElement(i.a.Fragment,null,e.map((function(t,e){return i.a.createElement("line",{key:e,x1:t[0][0],y1:t[0][1],x2:t[1][0],y2:t[1][1],stroke:"#eee"})})))})),x=i.a.memo((function(t){var e=t.points,n=t.activePoint;return i.a.createElement(i.a.Fragment,null,e.map((function(t,e){return i.a.createElement("circle",{key:e,cx:t.x,cy:t.y,r:3,fill:t===n?M:"#ddd"})})))})),H=(Math.PI,function(t){for(var e=new E([t.createKPoint([1,0,1,0]),t.createKPoint([0,-1,1,0]),t.createKPoint([-1,-1,0,0]),t.createKPoint([-1,0,-1,0]),t.createKPoint([0,1,-1,0]),t.createKPoint([1,1,0,0])],"red"),n=new E([t.createKPoint([-2,2,-4,0]),t.createKPoint([-2,0,-2,0]),t.createKPoint([0,2,-2,0])],"green"),a=new E([t.createKPoint([-1,1,-2,0]),t.createKPoint([-2,0,-2,0]),t.createKPoint([-2,-1,-1,0]),t.createKPoint([-1,-1,0,3]),t.createKPoint([-1,0,-1,0]),t.createKPoint([-1,0,-1,5])],"orange"),i=[e,n,a],r=1;r<6;r++)i.push(a.copy().rotate(60*r*Math.PI/180));for(var o=1;o<3;o++)i.push(n.copy().rotate(120*o*Math.PI/180));return new O(i,[t.createKPoint([-2,-4,2,0]),t.createKPoint([-2,2,-4,0]),t.createKPoint([4,2,2,0])])}),S=[[-2,-2,0,1],[-2,-2,0,2],[-3,-2,-1,4],[-2,-1,-1,2],[-2,-1,-1,4],[-1,0,-1,2],[-1,0,-1,4],[0,0,0,2],[0,0,0,3],[0,2,-2,0],[-4,-2,-2,0]],G=[[-2,-2,0,0],[-2,-2,0,1],[-2,-2,0,2],[-3,-2,-1,4],[-2,-1,-1,0],[-2,-1,-1,5],[-1,-1,0,2]],_=[[-2,-2,0,0],[-1,-1,0,2],[0,0,0,0]],T=[[0,0,0,0],[-1,-1,0,2],[-2,-1,-1,5],[-1,0,-1,0],[-1,0,-1,4],[0,0,0,2],[0,0,0,3]],I=[[-3,-2,-1,4],[-2,-1,-1,2],[-2,-1,-1,4],[-1,0,-1,2],[-1,0,-1,4],[-1,0,-1,0],[-2,-1,-1,0]],F=function(t){var e=new E(S.map((function(e){return t.createKPoint(e)})),"orange"),n=new E(G.map((function(e){return t.createKPoint(e)})),"blue"),a=new E(_.map((function(e){return t.createKPoint(e)})),"green"),i=new E(T.map((function(e){return t.createKPoint(e)})),"blue"),r=new E(I.map((function(e){return t.createKPoint(e)})),"red");return[new O([e,n,a,i,r],[t.createKPoint([-2,-2,0,0]),t.createKPoint([-4,-2,-2,0]),t.createKPoint([0,2,-2,0]),t.createKPoint([0,0,0,0])])]},L=function(t){for(var e=H(t),n=(new E([t.createKPoint([0,1,-1,0]),t.createKPoint([0,2,-2,0]),t.createKPoint([1,1,0,2]),t.createKPoint([2,2,0,0]),t.createKPoint([1,1,0,0])],"orange"),new E([t.createKPoint([0,2,-2,0]),t.createKPoint([2,2,0,0]),t.createKPoint([1,1,0,2])],"blue"),new E([[-1,0,-1,0],[-2,0,-2,0],[0,2,-2,0],[0,1,-1,0]].map((function(e){return t.createKPoint(e)})),F(t)[0])),a=[new E([t.createKPoint([0,0,0,0]),t.createKPoint([0,1,-1,0]),t.createKPoint([1,1,0,0])],e),n],i=[new O(a,[t.createKPoint([0,0,0,0]),t.createKPoint([0,2,-2,0]),t.createKPoint([2,2,0,0])])],r=1;r<6;r++)i.push(i[0].copy().rotate(60*r*Math.PI/180));return i},W=i.a.memo((function(t){var e=t.kPolygonGroup;t.drawHull;return i.a.createElement("g",null,e.kPolygons.map((function(t,n){return i.a.createElement(X,{key:n,kPolygon:t,tMat:e.tMat})})))})),X=i.a.memo((function(t){var e=t.kPolygon,n=t.tMat;if(e.color instanceof O){var a=e.tMat();return i.a.createElement(i.a.Fragment,null,e.color.kPolygons.map((function(t,e){return i.a.createElement(X,{key:e,kPolygon:t,tMat:a})})))}return i.a.createElement("path",{d:e.pathString(n),fill:e.color,fillOpacity:.4,stroke:"black",strokeWidth:3,strokeLinejoin:"round"})})),q=function(t){var e=t.mouseOver,n=Object(a.useRef)(null),r=Object(a.useState)({width:800,height:500}),o=Object(c.a)(r,1)[0],s=Object(a.useState)(null),l=Object(c.a)(s,2),h=l[0],f=l[1],v=Object(a.useState)([]),P=Object(c.a)(v,2),d=P[0],m=P[1],y=Object(a.useState)([]),k=Object(c.a)(y,2),g=k[0],p=k[1],b=Object(a.useState)(new w),K=Object(c.a)(b,2),E=K[0],O=(K[1],Object(a.useState)([])),M=Object(c.a)(O,2),H=M[0],S=M[1],G=Object(a.useState)([]),_=Object(c.a)(G,2),T=_[0],I=_[1],F=function(t){var a=t.x,i=t.y,r=n.current.getBoundingClientRect(),c=r.x,u=r.y,s=E.qTree.find(a-c-o.width/2,i-u-o.height/2);s&&s!==h&&(f(s),e(s))},X=Object(a.useCallback)((function(t){var e=t.x,a=t.y,i=n.current.getBoundingClientRect(),r=i.x,c=i.y,s=E.qTree.find(e-r-o.width/2,a-c-o.height/2);I([].concat(Object(u.a)(T),[s]))}),[T]),q=function(t){"c"===t.key&&I([])};return Object(a.useEffect)((function(){var t=n.current.clientWidth,e=n.current.clientHeight;console.log("KGRID init"),E.intitialize(t,e);var a=n.current;S(L(E));var i=E.getGrid(),r=i.pts,o=i.lines;return m(r),p(o),a.addEventListener("mousemove",F),window.addEventListener("keypress",q),function(){a.removeEventListener("mousemove",F),window.removeEventListener("keypress",q)}}),[]),Object(a.useEffect)((function(){var t=n.current;return t.addEventListener("click",X),function(){t.removeEventListener("click",X)}}),[X]),i.a.createElement("div",null,JSON.stringify(T.map((function(t){return[t.ant,t.bat,t.cat,t.dog]}))),i.a.createElement("svg",{ref:n,width:o.width,height:o.height},i.a.createElement("g",{transform:"translate(".concat(o.width/2,", ").concat(o.height/2,")")},i.a.createElement(j,{lines:g}),i.a.createElement(x,{points:d,activePoint:h}),H.map((function(t,e){return i.a.createElement(W,{key:e,kPolygonGroup:t})})))))};var A=function(){var t=Object(a.useState)(null),e=Object(c.a)(t,2),n=e[0],r=e[1];return i.a.createElement("div",null,i.a.createElement("div",{className:"mx-auto mt-10 shadow flex flex-row w-8/12"},i.a.createElement(q,{mouseOver:function(t){r(t)}}),n&&i.a.createElement("ul",null,i.a.createElement("li",null,"ANT: ",n.ant),i.a.createElement("li",null,"BAT: ",n.bat),i.a.createElement("li",null,"CAT: ",n.cat),i.a.createElement("li",null,"DOG: ",n.dog))))};o.a.render(i.a.createElement(A,null),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.3144b310.chunk.js.map