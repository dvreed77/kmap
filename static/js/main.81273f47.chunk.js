(this["webpackJsonphex-map"]=this["webpackJsonphex-map"]||[]).push([[0],{25:function(t,e,n){t.exports=n(34)},30:function(t,e,n){},34:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),r=n(19),o=n.n(r),s=(n(30),n(2)),c=n(8),h=n(9),u=n(13),l=n.n(u),v=l.a.mark(m),f=Math.sqrt(3),d=function(t){return!!(t%2)};function m(t,e){var n,a,i,r,o,s,c;return l.a.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:d(t)?(n=-(t-1)/2-1,a=(t-1)/2+1):(n=-t/2-1,a=t/2+1),d(e)?(i=-(e-1)/2,r=(e-1)/2+1):(i=-e/2,r=e/2+1),o=0,s=n;case 4:if(!(s<a)){h.next=16;break}c=i;case 6:if(!(c<r)){h.next=13;break}return h.next=9,[o,s,c];case 9:o++;case 10:c++,h.next=6;break;case 13:s++,h.next=4;break;case 16:case"end":return h.stop()}}),v)}var y=n(15),k=n(14),p=function(){function t(){Object(c.a)(this,t),this.kPoints=[],this.lines=[];var e=y.b().x((function(t){return t.x})).y((function(t){return t.y}));this.qTree=e}return Object(h.a)(t,[{key:"intitialize",value:function(t,e){this.width=t,this.height=e,this.setup()}},{key:"setup",value:function(){this.F=20,this.H=2*this.F,this.G=f*this.F,this.HEX_W=2*this.G,this.N_HEX_COLS=Math.ceil(this.width/this.HEX_W),this.N_HEX_ROWS=Math.ceil(this.height/(this.F+this.H)),this.genGrid()}},{key:"createKPoint",value:function(t){return Array.isArray(t)&&4===t.length&&(t=Object(k.zipObject)(["ant","bat","cat","dog"],t)),Object(k.find)(this.kPoints,t)}},{key:"genGrid",value:function(){var t=[],e=[],n=!0,a=!1,i=void 0;try{for(var r,o=m(this.N_HEX_COLS,this.N_HEX_ROWS)[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var c=r.value,h=Object(s.a)(c,3),u=h[0],l=h[1],v=h[2],f=void 0,y=void 0,k=void 0;d(v)?(f=l*this.HEX_W+this.HEX_W/2,y=(v+1)/2+l,k=(1-v)/2+l):(f=l*this.HEX_W,y=v/2+l,k=l-v/2);for(var p=0;p<6;p++){var P=v,b=p,E=v*(this.F+this.H),M=void 0,O=void 0;if(0===p)M=0,O=0;else{var j=(-30*p+150)*Math.PI/180;d(p)?(M=this.G*Math.cos(j),O=-this.G*Math.sin(j)):(M=this.H*Math.cos(j),O=-this.H*Math.sin(j))}var x=f+M,w=E+O;t.push(g({idx:"".concat(u,".").concat(p),i:l,j:v,x:x,y:w,ant:y,bat:k,cat:P,dog:b},this));for(var H=0;H<12;H++){var G=2*H*Math.PI/12,S=void 0,_=void 0;H%2?(S=this.H*Math.cos(G),_=-this.H*Math.sin(G)):(S=this.G*Math.cos(G),_=-this.G*Math.sin(G)),e.push([[f,E],[f+S,E+_]])}for(var F=0;F<6;F++){var I=(-30*F+150)*Math.PI/180,T=(-30*(F+1)+150)*Math.PI/180,W=void 0,X=void 0,A=void 0,C=void 0;F%2?(W=this.G*Math.cos(I),X=-this.G*Math.sin(I),A=this.H*Math.cos(T),C=-this.H*Math.sin(T)):(W=this.H*Math.cos(I),X=-this.H*Math.sin(I),A=this.G*Math.cos(T),C=-this.G*Math.sin(T)),e.push([[f+W,E+X],[f+A,E+C]])}}}}catch(q){a=!0,i=q}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}this.qTree.addAll(t),this.kPoints=t,this.lines=e}},{key:"getGrid",value:function(){return{pts:this.kPoints,lines:this.lines}}}]),t}(),g=function(t,e){return t.rotate=function(n){var a=t.x,i=t.y,r=Math.sqrt(Math.pow(a,2)+Math.pow(i,2)),o=Math.atan2(i,a)+n,s=r*Math.cos(o),c=r*Math.sin(o);return e.qTree.find(s,c)},t.translate=function(n){var a=n.dAnt,i=void 0===a?0:a,r=n.dBat,o=void 0===r?0:r,s=n.dCat,c=void 0===s?0:s,h=n.dDog,u=void 0===h?0:h;return e.createKPoint({ant:t.ant+i,bat:t.bat+o,cat:t.cat+c,dog:t.dog+u})},t},P=function(){function t(e,n){Object(c.a)(this,t),this.kPoints=e,this.color=n}return Object(h.a)(t,[{key:"copy",value:function(){return new t(this.kPoints,this.color)}},{key:"rotate",value:function(t){return this.kPoints=this.kPoints.map((function(e){return e.rotate(t)})),this}},{key:"translate",value:function(t){return this.kPoints=this.kPoints.map((function(e){return e.translate(t)})),this}},{key:"pathString",value:function(){var t=y.a();return this.kPoints.length&&(t.moveTo(this.kPoints[0].x/1,this.kPoints[0].y/1),this.kPoints.forEach((function(e){return t.lineTo(e.x/1,e.y/1)})),t.closePath()),t.toString()}}]),t}(),b=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(c.a)(this,t),this.kPolygons=e}return Object(h.a)(t,[{key:"add",value:function(t){this.kPolygons.push(t)}},{key:"copy",value:function(){return new t(this.kPolygons.map((function(t){return t.copy()})))}},{key:"rotate",value:function(t){return this.kPolygons=this.kPolygons.map((function(e){return e.rotate(t)})),this}},{key:"translate",value:function(t){return this.kPolygons=this.kPolygons.map((function(e){return e.translate(t)})),this}}]),t}(),E=p,M="#F20544",O=i.a.memo((function(t){var e=t.lines;return i.a.createElement(i.a.Fragment,null,e.map((function(t,e){return i.a.createElement("line",{key:e,x1:t[0][0],y1:t[0][1],x2:t[1][0],y2:t[1][1],stroke:"#eee"})})))})),j=i.a.memo((function(t){var e=t.points,n=t.activePoint;return i.a.createElement(i.a.Fragment,null,e.map((function(t,e){return i.a.createElement("circle",{key:e,cx:t.x,cy:t.y,r:3,fill:t===n?M:"#ddd"})})))})),x=i.a.memo((function(t){var e=t.shapes;return i.a.createElement(i.a.Fragment,null,e.map((function(t,e){return i.a.createElement("path",{key:e,d:t.pathString(),fill:t.color,fillOpacity:.4,stroke:"black",strokeWidth:3,strokeLinejoin:"round"})})))})),w=[{type:"KPolygon",kPoints:[[1,0,1,0],[0,-1,1,0],[-1,-1,0,0],[-1,0,-1,0],[0,1,-1,0],[1,1,0,0]],color:"red"},{type:"KPolygon",kPoints:[[-2,2,-4,0],[-2,0,-2,0],[0,2,-2,0]],color:"green",actions:[[["duplicate"],["rotate",60*Math.PI/180]]]},{type:"KPolygon",kPoints:[[-1,1,-2,0],[-2,0,-2,0],[-2,-1,-1,0],[-1,-1,0,3],[-1,0,-1,0],[-1,0,-1,5]],color:"orange"}],H=new E,G=function(t){var e=t.mouseOver,n=Object(a.useRef)(null),r=Object(a.useState)({width:800,height:500}),o=Object(s.a)(r,1)[0],c=Object(a.useState)(null),h=Object(s.a)(c,2),u=h[0],l=h[1],v=Object(a.useState)([]),f=Object(s.a)(v,2),d=f[0],m=f[1],y=Object(a.useState)([]),k=Object(s.a)(y,2),p=k[0],g=k[1],E=Object(a.useState)([]),M=Object(s.a)(E,2),G=M[0],S=M[1],_=function(t){var a=t.x,i=t.y,r=n.current.getBoundingClientRect(),s=r.x,c=r.y,h=H.qTree.find(a-s-o.width/2,i-c-o.height/2);h&&h!==u&&(l(h),e(h))};return Object(a.useEffect)((function(){var t=n.current.clientWidth,e=n.current.clientHeight;H.intitialize(t,e);var a=n.current,i=w.map((function(t){var e=t.kPoints,n=t.color;return new P(e.map((function(t){return H.createKPoint(t)})),n)}));console.log("MS",i);for(var r=1;r<6;r++)i.push(i[2].copy().rotate(60*r*Math.PI/180));for(var o=1;o<3;o++)i.push(i[1].copy().rotate(120*o*Math.PI/180));var s=new b(i),c=s.copy().translate({dBat:-1,dCat:1});s.rotate(60*Math.PI/180).translate({dAnt:2,dBat:3,dCat:-1}),S([s,c]);var h=H.getGrid(),u=h.pts,l=h.lines;return m(u),g(l),a.addEventListener("mousemove",_),function(){a.removeEventListener("mousemove",_)}}),[]),i.a.createElement("div",null,i.a.createElement("svg",{ref:n,width:o.width,height:o.height},i.a.createElement("g",{transform:"translate(".concat(o.width/2,", ").concat(o.height/2,")")},i.a.createElement(O,{lines:p}),i.a.createElement(j,{points:d,activePoint:u}),G.map((function(t){return i.a.createElement(x,{shapes:t.kPolygons})})))))};var S=function(){var t=Object(a.useState)(null),e=Object(s.a)(t,2),n=e[0],r=e[1];return i.a.createElement("div",null,i.a.createElement("div",{className:"mx-auto mt-10 shadow flex flex-row w-8/12"},i.a.createElement(G,{mouseOver:function(t){r(t)}}),n&&i.a.createElement("ul",null,i.a.createElement("li",null,"ANT: ",n.ant),i.a.createElement("li",null,"BAT: ",n.bat),i.a.createElement("li",null,"CAT: ",n.cat),i.a.createElement("li",null,"DOG: ",n.dog))))};o.a.render(i.a.createElement(S,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.81273f47.chunk.js.map