{"version":3,"sources":["utils.js","kcanvas.js","colors.js","Grid.js","Shapes.js","data.js","canvas.js","App.js","index.js"],"names":["GridGenerator","SQRT_3","Math","sqrt","isOdd","d","nCols","nRows","cStart","cEnd","rStart","rEnd","idx","i","j","KGrid","this","kPoints","lines","qTree","d3","x","y","width","height","setup","F","H","G","HEX_W","N_HEX_COLS","ceil","N_HEX_ROWS","genGrid","kPoint","Array","isArray","length","zipObject","find","x0","ant","bat","cat","dog","y0","dx","dy","angle","PI","cos","sin","xD","yD","push","KPoint","angle1","angle2","dx1","dy1","dx2","dy2","addAll","pts","kgrid","rotate","rotationAngle","r","pow","newAngle","atan2","newX","newY","translate","dAnt","dBat","dCat","dDog","createKPoint","KPolygon","color","map","translation","path","moveTo","forEach","kP","lineTo","closePath","toString","KPolygonGroup","kPolygons","kPolygon","copy","colors","GridLines","React","memo","line","key","x1","y1","x2","y2","stroke","GridPoints","points","activePoint","pt","cx","cy","fill","Shapes","shapes","polygon","pathString","fillOpacity","strokeWidth","strokeLinejoin","startShapes","type","actions","Canvas","mouseOver","cRef","useRef","useState","canvasDims","setActivePoint","gridPoints","setGridPoints","gridLines","setGridLines","polygonGroups","setPolygonGroups","mouseMove","current","getBoundingClientRect","rX","rY","useEffect","clientWidth","clientHeight","intitialize","svgNode","polygons","console","log","kG1","kG2","getGrid","addEventListener","removeEventListener","ref","transform","pG","App","activePt","setActivePt","className","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.81273f47.chunk.js","sourcesContent":["export const SQRT_3 = Math.sqrt(3);\n\nexport const isOdd = d => !!(d % 2);\n\nexport function* GridGenerator(nCols, nRows) {\n  let cStart, cEnd;\n  if (isOdd(nCols)) {\n    cStart = -(nCols - 1) / 2 - 1;\n    cEnd = (nCols - 1) / 2 + 1;\n  } else {\n    cStart = -nCols / 2 - 1;\n    cEnd = nCols / 2 + 1;\n  }\n\n  let rStart, rEnd;\n  if (isOdd(nRows)) {\n    rStart = -(nRows - 1) / 2;\n    rEnd = (nRows - 1) / 2 + 1;\n  } else {\n    rStart = -nRows / 2;\n    rEnd = nRows / 2 + 1;\n  }\n\n  let idx = 0;\n  for (let i = cStart; i < cEnd; i++) {\n    for (let j = rStart; j < rEnd; j++) {\n      yield [idx, i, j];\n      idx++;\n    }\n  }\n}\n","import { SQRT_3, GridGenerator, isOdd } from \"./utils\";\nimport * as d3 from \"d3\";\nimport { find, zipObject } from \"lodash\";\nclass KGrid {\n  constructor() {\n    this.kPoints = [];\n    this.lines = [];\n\n    const qTree = d3\n      .quadtree()\n      .x(d => d.x)\n      .y(d => d.y);\n\n    this.qTree = qTree;\n  }\n\n  intitialize(width, height) {\n    this.width = width;\n    this.height = height;\n\n    this.setup();\n  }\n\n  setup() {\n    this.F = 20;\n    this.H = 2 * this.F;\n    this.G = SQRT_3 * this.F;\n\n    this.HEX_W = 2 * this.G;\n    this.N_HEX_COLS = Math.ceil(this.width / this.HEX_W);\n    this.N_HEX_ROWS = Math.ceil(this.height / (this.F + this.H));\n\n    this.genGrid();\n  }\n\n  // THIS DRAWS THE POLYGON THAT REPRESENT DOG COORDS\n  // const polygons = Object.entries(R.groupBy(d => `${d.i}.${d.j}`)(pts)).map(\n  //   ([k, v]) => {\n  //     var path = d3.path();\n  //     path.moveTo(v[0].x, v[0].y);\n  //     for (let i = 0; i < v.length; i++) {\n  //       path.lineTo(v[i].x, v[i].y);\n  //     }\n  //     path.closePath();\n\n  //     return path.toString();\n  //   }\n  // );\n\n  // var path = d3.path();\n  // if (shape.length) {\n  //   path.moveTo(shape[0][0], shape[0][1]);\n  //   for (let i = 0; i < shape.length; i++) {\n  //     path.lineTo(shape[i][0], shape[i][1]);\n  //   }\n  //   path.closePath();\n  // }\n\n  // const shapePath = path.toString();\n\n  createKPoint(kPoint) {\n    if (Array.isArray(kPoint) && kPoint.length === 4) {\n      kPoint = zipObject([\"ant\", \"bat\", \"cat\", \"dog\"], kPoint);\n    }\n    return find(this.kPoints, kPoint);\n  }\n\n  genGrid() {\n    const kPoints = [];\n    const lines = [];\n\n    for (const [idx, i, j] of GridGenerator(this.N_HEX_COLS, this.N_HEX_ROWS)) {\n      let x0, ant, bat;\n      if (isOdd(j)) {\n        x0 = i * this.HEX_W + this.HEX_W / 2;\n        ant = (j + 1) / 2 + i;\n        bat = (1 - j) / 2 + i;\n      } else {\n        x0 = i * this.HEX_W;\n        ant = j / 2 + i;\n        bat = i - j / 2;\n      }\n\n      for (let d = 0; d < 6; d++) {\n        const cat = j;\n        const dog = d;\n\n        const y0 = j * (this.F + this.H);\n\n        let dx, dy;\n        if (d === 0) {\n          dx = 0;\n          dy = 0;\n        } else {\n          const angle = ((-30 * d + 150) * Math.PI) / 180;\n          if (isOdd(d)) {\n            dx = this.G * Math.cos(angle);\n            dy = -this.G * Math.sin(angle);\n          } else {\n            dx = this.H * Math.cos(angle);\n            dy = -this.H * Math.sin(angle);\n          }\n        }\n\n        const xD = x0 + dx;\n        const yD = y0 + dy;\n\n        kPoints.push(\n          KPoint(\n            {\n              idx: `${idx}.${d}`,\n              i,\n              j,\n              x: xD,\n              y: yD,\n              ant,\n              bat,\n              cat,\n              dog\n            },\n            this\n          )\n        );\n\n        // Gen Spokes\n        for (let d = 0; d < 12; d++) {\n          const angle = (d * 2 * Math.PI) / 12;\n\n          let dx, dy;\n\n          if (d % 2) {\n            dx = this.H * Math.cos(angle);\n            dy = -this.H * Math.sin(angle);\n          } else {\n            dx = this.G * Math.cos(angle);\n            dy = -this.G * Math.sin(angle);\n          }\n\n          lines.push([\n            [x0, y0],\n            [x0 + dx, y0 + dy]\n          ]);\n        }\n\n        // Gen Edges\n        // See Page 60 of notes\n        for (let d = 0; d < 6; d++) {\n          const angle1 = ((-30 * d + 150) * Math.PI) / 180;\n          const angle2 = ((-30 * (d + 1) + 150) * Math.PI) / 180;\n\n          let dx1, dy1, dx2, dy2;\n\n          if (d % 2) {\n            dx1 = this.G * Math.cos(angle1);\n            dy1 = -this.G * Math.sin(angle1);\n            dx2 = this.H * Math.cos(angle2);\n            dy2 = -this.H * Math.sin(angle2);\n          } else {\n            dx1 = this.H * Math.cos(angle1);\n            dy1 = -this.H * Math.sin(angle1);\n            dx2 = this.G * Math.cos(angle2);\n            dy2 = -this.G * Math.sin(angle2);\n          }\n\n          lines.push([\n            [x0 + dx1, y0 + dy1],\n            [x0 + dx2, y0 + dy2]\n          ]);\n        }\n      }\n    }\n\n    this.qTree.addAll(kPoints);\n    this.kPoints = kPoints;\n    this.lines = lines;\n  }\n\n  getGrid() {\n    return {\n      pts: this.kPoints,\n      lines: this.lines\n    };\n  }\n}\n\nexport const KPoint = (kPoint, kgrid) => {\n  kPoint.rotate = rotationAngle => {\n    const { x, y } = kPoint;\n\n    const r = Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));\n    const angle = Math.atan2(y, x);\n    const newAngle = angle + rotationAngle;\n\n    const newX = r * Math.cos(newAngle);\n    const newY = r * Math.sin(newAngle);\n\n    return kgrid.qTree.find(newX, newY);\n  };\n\n  kPoint.translate = ({ dAnt = 0, dBat = 0, dCat = 0, dDog = 0 }) => {\n    return kgrid.createKPoint({\n      ant: kPoint.ant + dAnt,\n      bat: kPoint.bat + dBat,\n      cat: kPoint.cat + dCat,\n      dog: kPoint.dog + dDog\n    });\n  };\n\n  return kPoint;\n};\n\nexport class KPolygon {\n  constructor(kPoints, color) {\n    this.kPoints = kPoints;\n    this.color = color;\n  }\n\n  copy() {\n    return new KPolygon(this.kPoints, this.color);\n  }\n\n  rotate(rotationAngle) {\n    this.kPoints = this.kPoints.map(d => d.rotate(rotationAngle));\n    return this;\n  }\n\n  translate(translation) {\n    this.kPoints = this.kPoints.map(d => d.translate(translation));\n    return this;\n  }\n\n  pathString() {\n    var path = d3.path();\n\n    const density = 1;\n\n    if (this.kPoints.length) {\n      path.moveTo(this.kPoints[0].x / density, this.kPoints[0].y / density);\n      this.kPoints.forEach(kP => path.lineTo(kP.x / density, kP.y / density));\n      path.closePath();\n    }\n\n    return path.toString();\n  }\n}\n\nexport class KPolygonGroup {\n  constructor(kPolygons = []) {\n    this.kPolygons = kPolygons;\n  }\n\n  add(kPolygon) {\n    this.kPolygons.push(kPolygon);\n  }\n\n  copy() {\n    return new KPolygonGroup(this.kPolygons.map(kP => kP.copy()));\n  }\n\n  rotate(rotationAngle) {\n    this.kPolygons = this.kPolygons.map(kP => kP.rotate(rotationAngle));\n    return this;\n  }\n\n  translate(translation) {\n    this.kPolygons = this.kPolygons.map(kP => kP.translate(translation));\n    return this;\n  }\n}\n\nexport default KGrid;\n","export const colors = {\n  base: \"#F2FBFD\",\n  dark: \"#002C3E\",\n  a1: \"#049DD9\",\n  a2: \"#04B2D9\",\n  highlight: \"#F20544\",\n  highlight_dull: \"#FB93AF\"\n};\n","import React from \"react\";\nimport { colors } from \"./colors\";\n\nexport const GridLines = React.memo(({ lines }) => (\n  <>\n    {lines.map((line, idx) => (\n      <line\n        key={idx}\n        x1={line[0][0]}\n        y1={line[0][1]}\n        x2={line[1][0]}\n        y2={line[1][1]}\n        stroke={\"#eee\"}\n      />\n    ))}\n  </>\n));\n\nexport const GridPoints = React.memo(({ points, activePoint }) => (\n  <>\n    {points.map((pt, idx) => (\n      <circle\n        key={idx}\n        cx={pt.x}\n        cy={pt.y}\n        // r={pt.idx === activeIdx ? 5 : 2}\n        r={3}\n        fill={pt === activePoint ? colors.highlight : \"#ddd\"}\n      />\n    ))}\n  </>\n));\n","import React from \"react\";\n\nconst Shapes = React.memo(({ shapes }) => (\n  <>\n    {shapes.map((polygon, idx) => (\n      <path\n        key={idx}\n        d={polygon.pathString()}\n        fill={polygon.color}\n        fillOpacity={0.4}\n        stroke={\"black\"}\n        strokeWidth={3}\n        strokeLinejoin=\"round\"\n      />\n    ))}\n  </>\n));\n\nexport default Shapes;\n","export const startShapes = [\n  {\n    type: \"KPolygon\",\n    kPoints: [\n      [1, 0, 1, 0],\n      [0, -1, 1, 0],\n      [-1, -1, 0, 0],\n      [-1, 0, -1, 0],\n      [0, 1, -1, 0],\n      [1, 1, 0, 0]\n    ],\n    color: \"red\"\n  },\n  {\n    type: \"KPolygon\",\n    kPoints: [\n      [-2, 2, -4, 0],\n      [-2, 0, -2, 0],\n      [0, 2, -2, 0]\n    ],\n    color: \"green\",\n    actions: [[[\"duplicate\"], [\"rotate\", (60 * Math.PI) / 180]]]\n  },\n  {\n    type: \"KPolygon\",\n    kPoints: [\n      [-1, 1, -2, 0],\n      [-2, 0, -2, 0],\n      [-2, -1, -1, 0],\n      [-1, -1, 0, 3],\n      [-1, 0, -1, 0],\n      [-1, 0, -1, 5]\n    ],\n    color: \"orange\"\n  }\n];\n","import React, { useRef, useEffect, useState } from \"react\";\nimport KGrid, { KPolygon, KPolygonGroup } from \"./kcanvas\";\nimport { GridLines, GridPoints } from \"./Grid\";\nimport Shapes from \"./Shapes\";\nimport { startShapes } from \"./data\";\n// See Page 58 in Notes\n\nconst kgrid = new KGrid();\n\nconst Canvas = ({ mouseOver }) => {\n  const cRef = useRef(null);\n\n  const [canvasDims] = useState({ width: 800, height: 500 });\n  const [activePoint, setActivePoint] = useState(null);\n  const [gridPoints, setGridPoints] = useState([]);\n  const [gridLines, setGridLines] = useState([]);\n  const [polygonGroups, setPolygonGroups] = useState([]);\n\n  const mouseMove = ({ x, y }) => {\n    const { x: rX, y: rY } = cRef.current.getBoundingClientRect();\n    const pt = kgrid.qTree.find(\n      x - rX - canvasDims.width / 2,\n      y - rY - canvasDims.height / 2\n    );\n    if (pt && pt !== activePoint) {\n      setActivePoint(pt);\n      mouseOver(pt);\n    }\n  };\n\n  useEffect(() => {\n    const width = cRef.current.clientWidth;\n    const height = cRef.current.clientHeight;\n\n    kgrid.intitialize(width, height);\n\n    const svgNode = cRef.current;\n\n    const polygons = startShapes.map(\n      ({ kPoints, color }) =>\n        new KPolygon(\n          kPoints.map(kPoint => kgrid.createKPoint(kPoint)),\n          color\n        )\n    );\n\n    console.log(\"MS\", polygons);\n\n    for (let i = 1; i < 6; i++) {\n      polygons.push(polygons[2].copy().rotate((i * 60 * Math.PI) / 180));\n    }\n\n    for (let i = 1; i < 3; i++) {\n      polygons.push(polygons[1].copy().rotate((i * 120 * Math.PI) / 180));\n    }\n\n    const kG1 = new KPolygonGroup(polygons);\n\n    const kG2 = kG1.copy().translate({ dBat: -1, dCat: 1 });\n\n    kG1.rotate((60 * Math.PI) / 180).translate({ dAnt: 2, dBat: 3, dCat: -1 });\n\n    setPolygonGroups([kG1, kG2]);\n\n    // kgrid.rotateKPoint(\n    //   {\n    //     ant: -2,\n    //     bat: -1,\n    //     cat: -1,\n    //     dog: 0\n    //   },\n    //   (60 * Math.PI) / 180\n    // );\n\n    const { pts, lines } = kgrid.getGrid();\n\n    setGridPoints(pts);\n    setGridLines(lines);\n\n    svgNode.addEventListener(\"mousemove\", mouseMove);\n\n    return () => {\n      svgNode.removeEventListener(\"mousemove\", mouseMove);\n    };\n  }, []);\n\n  return (\n    <div>\n      <svg ref={cRef} width={canvasDims.width} height={canvasDims.height}>\n        <g\n          transform={`translate(${canvasDims.width / 2}, ${canvasDims.height /\n            2})`}\n        >\n          <GridLines lines={gridLines} />\n          <GridPoints points={gridPoints} activePoint={activePoint} />\n          {polygonGroups.map(pG => (\n            <Shapes shapes={pG.kPolygons} />\n          ))}\n        </g>\n      </svg>\n    </div>\n  );\n};\n\nexport default Canvas;\n","import React, { useState } from \"react\";\nimport Canvas from \"./canvas\";\n\nfunction App() {\n  const [activePt, setActivePt] = useState(null);\n  const mouseOver = pt => {\n    setActivePt(pt);\n  };\n\n  return (\n    <div>\n      <div className=\"mx-auto mt-10 shadow flex flex-row w-8/12\">\n        <Canvas mouseOver={mouseOver} />\n        {activePt && (\n          <ul>\n            <li>ANT: {activePt.ant}</li>\n            <li>BAT: {activePt.bat}</li>\n            <li>CAT: {activePt.cat}</li>\n            <li>DOG: {activePt.dog}</li>\n          </ul>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}