(this["webpackJsonphex-map"]=this["webpackJsonphex-map"]||[]).push([[0],{140:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n.n(i),r=n(72),s=n.n(r),o=(n(87),n(88),n(75)),h=n(6),c=n(35),l="#F20544",u=n(52),v=n(53),d=n(54),f=n.n(d),m=f.a.mark(E),g=Math.sqrt(3),p=function(t){return!!(t%2)};function E(t,e){var n,i,a,r,s,o,h;return f.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:p(t)?(n=-(t-1)/2-1,i=(t-1)/2+1):(n=-t/2-1,i=t/2+1),p(e)?(a=-(e-1)/2,r=(e-1)/2+1):(a=-e/2,r=e/2+1),s=0,o=n;case 4:if(!(o<i)){c.next=16;break}h=a;case 6:if(!(h<r)){c.next=13;break}return c.next=9,[s,o,h];case 9:s++;case 10:h++,c.next=6;break;case 13:o++,c.next=4;break;case 16:case"end":return c.stop()}}),m)}var H=function(){function t(){Object(u.a)(this,t),this.pts=[],this.lines=[];var e=c.b().x((function(t){return t.x})).y((function(t){return t.y}));this.qTree=e}return Object(v.a)(t,[{key:"intitialize",value:function(t,e){this.width=t,this.height=e,this.setup2()}},{key:"setup1",value:function(){this.N_HEX_COLS=7,this.HEX_W=this.width/this.N_HEX_COLS,this.F=this.HEX_W/(2*g),this.H=this.HEX_W/g,this.G=this.HEX_W/2,this.N_HEX_ROWS=Math.ceil(this.height/(this.F+this.H)),this.createGrid(),this.createLines()}},{key:"setup2",value:function(){this.F=20,this.H=2*this.F,this.G=g*this.F,this.HEX_W=2*this.G,this.N_HEX_COLS=Math.ceil(this.width/this.HEX_W),this.N_HEX_ROWS=Math.ceil(this.height/(this.F+this.H)),this.genGrid()}},{key:"genGrid",value:function(){var t=[],e=[],n=!0,i=!1,a=void 0;try{for(var r,s=E(this.N_HEX_COLS,this.N_HEX_ROWS)[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var o=r.value,c=Object(h.a)(o,3),l=c[0],u=c[1],v=c[2],d=void 0,f=void 0,m=void 0;p(v)?(d=u*this.HEX_W+this.HEX_W/2+this.width/2,f=(v+1)/2+u,m=(1-v)/2+u):(d=u*this.HEX_W+this.width/2,f=v/2+u,m=u-v/2);for(var g=0;g<6;g++){var H=v,b=g,y=v*(this.F+this.H)+this.height/2,M=void 0,O=void 0;if(0===g)M=0,O=0;else{var k=(-30*g+150)*Math.PI/180;p(g)?(M=this.G*Math.cos(k),O=-this.G*Math.sin(k)):(M=this.H*Math.cos(k),O=-this.H*Math.sin(k))}var x=d+M,_=y+O;t.push({idx:"".concat(l,".").concat(g),i:u,j:v,x:x,y:_,ant:f,bat:m,cat:H,dog:b});for(var P=0;P<12;P++){var w=2*P*Math.PI/12,G=void 0,j=void 0;P%2?(G=this.H*Math.cos(w),j=-this.H*Math.sin(w)):(G=this.G*Math.cos(w),j=-this.G*Math.sin(w)),e.push([[d,y],[d+G,y+j]])}for(var X=0;X<6;X++){var W=(-30*X+150)*Math.PI/180,S=(-30*(X+1)+150)*Math.PI/180,T=void 0,F=void 0,C=void 0,N=void 0;X%2?(T=this.G*Math.cos(W),F=-this.G*Math.sin(W),C=this.H*Math.cos(S),N=-this.H*Math.sin(S)):(T=this.H*Math.cos(W),F=-this.H*Math.sin(W),C=this.G*Math.cos(S),N=-this.G*Math.sin(S)),e.push([[d+T,y+F],[d+C,y+N]])}}}}catch(I){i=!0,a=I}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}this.qTree.addAll(t),this.pts=t,this.lines=e}},{key:"getGrid",value:function(){return{pts:this.pts,lines:this.lines}}},{key:"convertHexPointToCanvasPoint",value:function(t){var e,n=t.cat;e=n%2?(t.ant-(n+1)/2)*this.HEX_W+this.HEX_W/2+this.width/2:(t.ant-n/2)*this.HEX_W+this.width/2;var i,a,r=3*n*this.HEX_W/(2*g)+this.height/2;if(0===t.dog)i=0,a=0;else{var s=(-30*t.dog+150)*Math.PI/180;t.dog%2?(i=this.G*Math.cos(s),a=-this.G*Math.sin(s)):(i=this.H*Math.cos(s),a=-this.H*Math.sin(s))}return[e+i,r+a]}},{key:"rotateKPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.convertHexPointToCanvasPoint(t),i=n[0]-this.width/2,a=n[1]-this.height/2,r=Math.sqrt(Math.pow(i,2)+Math.pow(a,2)),s=Math.atan2(a,i),o=s+e,h=r*Math.cos(o),c=r*Math.sin(o),l=this.qTree.find(h+this.width/2,c+this.height/2),u=l.ant,v=l.bat,d=l.cat,f=l.dog;return b({ant:u,bat:v,cat:d,dog:f})}},{key:"rotateKPolygon",value:function(t,e){var n=this,i=t.kPoints.map((function(t){return n.rotateKPoint(t,e)}));return new y(i,this)}}]),t}(),b=function(t){return{ant:t.ant,bat:t.bat,cat:t.cat,dog:t.dog}},y=function(){function t(e,n){Object(u.a)(this,t),console.log("KPolygon",e),this.kPoints=e,this.kGrid=n}return Object(v.a)(t,[{key:"draw",value:function(){var t=this,e=c.a(),n=this.kPoints.map((function(e){return t.kGrid.convertHexPointToCanvasPoint(e)}));if(n.length){e.moveTo(n[0][0],n[0][1]);for(var i=0;i<n.length;i++)e.lineTo(n[i][0],n[i][1]);e.closePath()}return e.toString()}}]),t}(),M=[{pts:[[1,0,1,0],[0,-1,1,0],[-1,-1,0,0],[-1,0,-1,0],[0,1,-1,0],[1,1,0,0]],color:"red"},{pts:[[-2,2,-4,0],[-2,0,-2,0],[0,2,-2,0]],color:"green"},{pts:[[-2,-2,0,0],[-2,-4,2,0],[0,-2,2,0]],color:"green"},{pts:[[2,2,0,0],[2,0,2,0],[4,2,2,0]],color:"green"},{pts:[[-1,1,-2,0],[-2,0,-2,0],[-2,-1,-1,0],[-1,-1,0,3],[-1,0,-1,0],[-1,0,-1,5]],color:"orange"}],O=new H,k=a.a.memo((function(t){var e=t.lines;return a.a.createElement(a.a.Fragment,null,e.map((function(t,e){return a.a.createElement("line",{key:e,x1:t[0][0],y1:t[0][1],x2:t[1][0],y2:t[1][1],stroke:"#eee"})})))})),x=a.a.memo((function(t){var e=t.points,n=t.activePoint;return a.a.createElement(a.a.Fragment,null,e.map((function(t,e){return a.a.createElement("circle",{key:e,cx:t.x,cy:t.y,r:3,fill:t===n?l:"#ddd"})})))})),_=a.a.memo((function(t){var e=t.shapes;return a.a.createElement(a.a.Fragment,null,e.map((function(t,e){var n=t.polygon,i=t.color;return a.a.createElement("path",{key:e,d:n.draw(O),fill:i,fillOpacity:.4,stroke:"black",strokeWidth:3})})))})),P=function(t){t.gridDensity;var e=t.mouseOver,n=Object(i.useRef)(null),r=Object(i.useState)(null),s=Object(h.a)(r,2),o=s[0],c=s[1],l=Object(i.useState)([]),u=Object(h.a)(l,2),v=u[0],d=u[1],f=Object(i.useState)([]),m=Object(h.a)(f,2),g=m[0],p=m[1],E=Object(i.useState)([]),H=Object(h.a)(E,2),P=H[0],w=H[1],G=function(t){var i=t.x,a=t.y,r=n.current.getBoundingClientRect(),s=r.x,h=r.y,l=O.qTree.find(i-s,a-h);l&&l!==o&&(c(l),e(l))};return Object(i.useEffect)((function(){var t=n.current.clientWidth,e=n.current.clientHeight;O.intitialize(t,e);var i=M.map((function(t){var e=t.pts;return{color:t.color,polygon:new y(e.map((function(t){return b({ant:t[0],bat:t[1],cat:t[2],dog:t[3]})})),O)}}));console.log(O.rotateKPoint({ant:-2,bat:-1,cat:-1,dog:0}));for(var a=1;a<6;a++)i.push({color:i[4].color,polygon:O.rotateKPolygon(i[4].polygon,60*a*Math.PI/180)});w(i),O.rotateKPoint({ant:-2,bat:-1,cat:-1,dog:0},60*Math.PI/180);var r=O.getGrid(),s=r.pts,o=r.lines;return d(s),p(o),n.current.addEventListener("mousemove",G),function(){n.current.removeEventListener("mousemove",G)}}),[]),a.a.createElement("div",null,a.a.createElement("svg",{ref:n,width:800,height:500},a.a.createElement(k,{lines:g}),a.a.createElement(x,{points:v,activePoint:o}),a.a.createElement(_,{shapes:P})))};var w=function(){var t=Object(i.useState)(null),e=Object(h.a)(t,2),n=e[0],r=e[1],s=Object(i.useState)(1),c=Object(h.a)(s,2),l=c[0],u=c[1];return a.a.createElement("div",null,a.a.createElement("div",{className:"mx-auto mt-10 shadow flex flex-row w-8/12"},a.a.createElement(P,{gridDensity:l,mouseOver:function(t){r(t)}}),a.a.createElement(o.a,{min:1,max:4,defaultValue:1,onChange:u}),n&&a.a.createElement("ul",null,a.a.createElement("li",null,"ANT: ",n.ant),a.a.createElement("li",null,"BAT: ",n.bat),a.a.createElement("li",null,"CAT: ",n.cat),a.a.createElement("li",null,"DOG: ",n.dog))))};s.a.render(a.a.createElement(w,null),document.getElementById("root"))},82:function(t,e,n){t.exports=n(140)},87:function(t,e,n){}},[[82,1,2]]]);
//# sourceMappingURL=main.41d8b266.chunk.js.map