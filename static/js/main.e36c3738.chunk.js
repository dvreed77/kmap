(this["webpackJsonphex-map"]=this["webpackJsonphex-map"]||[]).push([[0],{28:function(t,e,n){t.exports=n(37)},33:function(t,e,n){},37:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),r=n(23),o=n.n(r),c=(n(33),n(2)),s=n(10),u=n(11),l=n(17),h=n.n(l),f=h.a.mark(d),v=Math.sqrt(3),y=function(t){return!!(t%2)};function d(t,e){var n,a,i,r,o,c,s;return h.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:y(t)?(n=-(t-1)/2-1,a=(t-1)/2+1):(n=-t/2-1,a=t/2+1),y(e)?(i=-(e-1)/2,r=(e-1)/2+1):(i=-e/2,r=e/2+1),o=0,c=n;case 4:if(!(c<a)){u.next=16;break}s=i;case 6:if(!(s<r)){u.next=13;break}return u.next=9,[o,c,s];case 9:o++;case 10:s++,u.next=6;break;case 13:c++,u.next=4;break;case 16:case"end":return u.stop()}}),f)}var m=n(13),k=n(12),p=n(18),P=n(38),g=function(){function t(){Object(s.a)(this,t),this.kPoints=[],this.lines=[];var e=k.b().x((function(t){return t.x})).y((function(t){return t.y}));this.qTree=e}return Object(u.a)(t,[{key:"intitialize",value:function(t,e){this.width=t,this.height=e,this.setup()}},{key:"setup",value:function(){this.F=20,this.H=2*this.F,this.G=v*this.F,this.HEX_W=2*this.G,this.N_HEX_COLS=Math.ceil(this.width/this.HEX_W),this.N_HEX_ROWS=Math.ceil(this.height/(this.F+this.H)),this.genGrid()}},{key:"createKPoint",value:function(t){return Array.isArray(t)&&4===t.length&&(t=Object(p.zipObject)(["ant","bat","cat","dog"],t)),Object(p.find)(this.kPoints,t)}},{key:"genGrid",value:function(){var t=[],e=[],n=!0,a=!1,i=void 0;try{for(var r,o=d(this.N_HEX_COLS,this.N_HEX_ROWS)[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value,u=Object(c.a)(s,3),l=u[0],h=u[1],f=u[2],v=void 0,m=void 0,k=void 0;y(f)?(v=h*this.HEX_W+this.HEX_W/2,m=(f+1)/2+h,k=(1-f)/2+h):(v=h*this.HEX_W,m=f/2+h,k=h-f/2);for(var p=0;p<6;p++){var P=f,g=p,b=f*(this.F+this.H),E=void 0,x=void 0;if(0===p)E=0,x=0;else{var O=(-30*p+150)*Math.PI/180;y(p)?(E=this.G*Math.cos(O),x=-this.G*Math.sin(O)):(E=this.H*Math.cos(O),x=-this.H*Math.sin(O))}var j=v+E,w=b+x;t.push(M({idx:"".concat(l,".").concat(p),i:h,j:f,x:j,y:w,ant:m,bat:k,cat:P,dog:g},this));for(var H=0;H<12;H++){var K=2*H*Math.PI/12,S=void 0,G=void 0;H%2?(S=this.H*Math.cos(K),G=-this.H*Math.sin(K)):(S=this.G*Math.cos(K),G=-this.G*Math.sin(K)),e.push([[v,b],[v+S,b+G]])}for(var _=0;_<6;_++){var T=(-30*_+150)*Math.PI/180,W=(-30*(_+1)+150)*Math.PI/180,F=void 0,I=void 0,X=void 0,q=void 0;_%2?(F=this.G*Math.cos(T),I=-this.G*Math.sin(T),X=this.H*Math.cos(W),q=-this.H*Math.sin(W)):(F=this.H*Math.cos(T),I=-this.H*Math.sin(T),X=this.G*Math.cos(W),q=-this.G*Math.sin(W)),e.push([[v+F,b+I],[v+X,b+q]])}}}}catch(L){a=!0,i=L}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}this.qTree.addAll(t),this.kPoints=t,this.lines=e}},{key:"getGrid",value:function(){return{pts:this.kPoints,lines:this.lines}}}]),t}(),M=function(t,e){return t.rotate=function(n){var a=t.x,i=t.y,r=Math.sqrt(Math.pow(a,2)+Math.pow(i,2)),o=Math.atan2(i,a)+n,c=r*Math.cos(o),s=r*Math.sin(o);return e.qTree.find(c,s)},t.translate=function(n){var a=n.dAnt,i=void 0===a?0:a,r=n.dBat,o=void 0===r?0:r,c=n.dCat,s=void 0===c?0:c,u=n.dDog,l=void 0===u?0:u;return e.createKPoint({ant:t.ant+i,bat:t.bat+o,cat:t.cat+s,dog:t.dog+l})},t},b=function(){function t(e,n){Object(s.a)(this,t),this.kPoints=e,this.color=n}return Object(u.a)(t,[{key:"tMat",value:function(){var t=this.color.hull,e=this.kPoints,n=t.slice(0,3).map((function(t){return[t.x,t.y]})),a=e.slice(0,3).map((function(t){return[t.x,t.y]}));return Object(m.b)(n,a)}},{key:"copy",value:function(){return new t(this.kPoints,this.color)}},{key:"rotate",value:function(t){return this.kPoints=this.kPoints.map((function(e){return e.rotate(t)})),this}},{key:"translate",value:function(t){return this.kPoints=this.kPoints.map((function(e){return e.translate(t)})),this}},{key:"pathString",value:function(t){var e=k.a(),n=this.kPoints.map((function(t){return[t.x,t.y]})),a=t?Object(m.a)(t,n):n;return a.length&&(e.moveTo(a[0][0],a[0][1]),a.forEach((function(t){var n=Object(c.a)(t,2),a=n[0],i=n[1];return e.lineTo(a,i)})),e.closePath()),e.toString()}}]),t}(),E=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object(s.a)(this,t),this.kPolygons=e,this.hull=n,this.hull2=a;var i=n.slice(0,3).map((function(t){return[t.x,t.y]})),r=a.slice(0,3).map((function(t){return[t.x,t.y]})),o=Object(m.b)(i,r);this.tMat=o}return Object(u.a)(t,[{key:"add",value:function(t){this.kPolygons.push(t)}},{key:"copy",value:function(){return new t(this.kPolygons.map((function(t){return t.copy()})))}},{key:"rotate",value:function(t){return this.kPolygons=this.kPolygons.map((function(e){return e.rotate(t)})),this}},{key:"hullString",value:function(){var t=this.kPolygons.flatMap((function(t){return t.kPoints.map((function(t){return t}))})),e=Object(P.a)(t.map((function(t){return[t.x,t.y,t.idx]})));console.log(t,e,t.find((function(t){return"96.0"===t.idx})));var n=k.a();return this.hull.length&&(n.moveTo(this.hull[0].x,this.hull[0].y),this.hull.forEach((function(t){return n.lineTo(t.x,t.y)})),n.closePath()),n.toString()}},{key:"translate",value:function(t){return this.kPolygons=this.kPolygons.map((function(e){return e.translate(t)})),this}}]),t}(),x=g,O="#F20544",j=i.a.memo((function(t){var e=t.lines;return i.a.createElement(i.a.Fragment,null,e.map((function(t,e){return i.a.createElement("line",{key:e,x1:t[0][0],y1:t[0][1],x2:t[1][0],y2:t[1][1],stroke:"#eee"})})))})),w=i.a.memo((function(t){var e=t.points,n=t.activePoint;return i.a.createElement(i.a.Fragment,null,e.map((function(t,e){return i.a.createElement("circle",{key:e,cx:t.x,cy:t.y,r:3,fill:t===n?O:"#ddd"})})))})),H=[{type:"KPolygon",kPoints:[[1,0,1,0],[0,-1,1,0],[-1,-1,0,0],[-1,0,-1,0],[0,1,-1,0],[1,1,0,0]],color:"red"},{type:"KPolygon",kPoints:[[-2,2,-4,0],[-2,0,-2,0],[0,2,-2,0]],color:"green",actions:[[["duplicate"],["rotate",60*Math.PI/180]]]},{type:"KPolygon",kPoints:[[-1,1,-2,0],[-2,0,-2,0],[-2,-1,-1,0],[-1,-1,0,3],[-1,0,-1,0],[-1,0,-1,5]],color:"orange"}],K=new x,S=(i.a.memo((function(t){var e=t.kPolygonGroup,n=t.drawHull,a=void 0!==n&&n;return i.a.createElement("g",null,e.kPolygons.map((function(t,n){return i.a.createElement(S,{key:n,kPolygon:t,tMat:e.tMat})})),a&&i.a.createElement("path",{d:e.hullString(),fill:"none",strokeDasharray:"10",stroke:"#fc839f",strokeWidth:3,strokeLinejoin:"round"}))})),i.a.memo((function(t){var e=t.kPolygon,n=t.tMat;if(e.color instanceof E){console.log("POL",e.tMat);var a=e.tMat();return i.a.createElement(i.a.Fragment,null,e.color.kPolygons.map((function(t,e){return i.a.createElement(S,{key:e,kPolygon:t,tMat:a})})))}return i.a.createElement("path",{d:e.pathString(n),fill:e.color,fillOpacity:.4,stroke:"black",strokeWidth:3,strokeLinejoin:"round"})}))),G=function(t){var e=t.mouseOver,n=Object(a.useRef)(null),r=Object(a.useState)({width:800,height:500}),o=Object(c.a)(r,1)[0],s=Object(a.useState)(null),u=Object(c.a)(s,2),l=u[0],h=u[1],f=Object(a.useState)([]),v=Object(c.a)(f,2),y=v[0],d=v[1],m=Object(a.useState)([]),k=Object(c.a)(m,2),p=k[0],P=k[1],g=Object(a.useState)([]),M=Object(c.a)(g,2),x=(M[0],M[1]),O=Object(a.useState)([]),G=Object(c.a)(O,2),_=G[0],T=G[1],W=function(t){var a=t.x,i=t.y,r=n.current.getBoundingClientRect(),c=r.x,s=r.y,u=K.qTree.find(a-c-o.width/2,i-s-o.height/2);u&&u!==l&&(h(u),e(u))};return Object(a.useEffect)((function(){var t=n.current.clientWidth,e=n.current.clientHeight;K.intitialize(t,e);for(var a=n.current,i=H.map((function(t){var e=t.kPoints,n=t.color;return new b(e.map((function(t){return K.createKPoint(t)})),n)})),r=1;r<6;r++)i.push(i[2].copy().rotate(60*r*Math.PI/180));for(var o=1;o<3;o++)i.push(i[1].copy().rotate(120*o*Math.PI/180));for(var c=new E(i,[K.createKPoint([-2,-4,2,0]),K.createKPoint([-2,2,-4,0]),K.createKPoint([4,2,2,0])],[K.createKPoint([0,0,0,0]),K.createKPoint([0,1,-1,0]),K.createKPoint([1,1,0,0])]),s=[new b([K.createKPoint([0,0,0,0]),K.createKPoint([0,1,-1,0]),K.createKPoint([1,1,0,0])],c)],u=1;u<6;u++)s.push(s[0].copy().rotate(60*u*Math.PI/180));x([c]),T(s);var l=K.createKPoint([0,0,0,0]),h=K.createKPoint([0,1,-1,0]),f=Math.sqrt(Math.pow(h.x-l.x,2)+Math.pow(h.y-l.y,2)),v=K.createKPoint([-2,-4,2,0]),y=K.createKPoint([-2,2,-4,0]),m=Math.sqrt(Math.pow(y.x-v.x,2)+Math.pow(y.y-v.y,2));console.log("LEN",f,m,m/f);var k=K.createKPoint([-2,-4,2,0]),p=K.createKPoint([0,0,0,0]),g=p.x-k.x,M=p.y-k.y;console.log(g,M);var O=K.getGrid(),j=O.pts,w=O.lines;return d(j),P(w),a.addEventListener("mousemove",W),function(){a.removeEventListener("mousemove",W)}}),[]),i.a.createElement("div",null,i.a.createElement("svg",{ref:n,width:o.width,height:o.height},i.a.createElement("g",{transform:"translate(".concat(o.width/2,", ").concat(o.height/2,")")},i.a.createElement(j,{lines:p}),i.a.createElement(w,{points:y,activePoint:l}),_.map((function(t,e){return i.a.createElement(S,{key:e,kPolygon:t})})))))};var _=function(){var t=Object(a.useState)(null),e=Object(c.a)(t,2),n=e[0],r=e[1];return i.a.createElement("div",null,i.a.createElement("div",{className:"mx-auto mt-10 shadow flex flex-row w-8/12"},i.a.createElement(G,{mouseOver:function(t){r(t)}}),n&&i.a.createElement("ul",null,i.a.createElement("li",null,"ANT: ",n.ant),i.a.createElement("li",null,"BAT: ",n.bat),i.a.createElement("li",null,"CAT: ",n.cat),i.a.createElement("li",null,"DOG: ",n.dog))))};o.a.render(i.a.createElement(_,null),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.e36c3738.chunk.js.map