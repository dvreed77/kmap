{"version":3,"sources":["colors.js","utils.js","kcanvas.js","canvas.js","App.js","index.js"],"names":["colors","GridGenerator","SQRT_3","Math","sqrt","isOdd","d","nCols","nRows","cStart","cEnd","rStart","rEnd","i","j","KGrid","width","height","this","setup2","N_HEX_COLS","HEX_W","F","H","G","N_HEX_ROWS","ceil","createGrid","createLines","pts","lines","x0","ant","bat","cat","dog","y0","dx","dy","angle","PI","cos","sin","xD","yD","push","x","y","angle1","angle2","dx1","dy1","dx2","dy2","kP","j0","KPolygon","grid","path","d3","map","pt","convertHexPointToCanvasPoint","length","moveTo","lineTo","closePath","toString","Canvas","gridDensity","mouseOver","cRef","useRef","useState","kgrid","setKGrid","shape","setShape","activeIdx","setActiveIdx","shapes","color","polygon","useEffect","kPt","setActive","idx","genGrid","polygons","Object","entries","R","v","ref","line","key","x1","y1","x2","y2","stroke","fill","fillOpacity","cx","cy","r","draw","strokeWidth","onMouseOver","onMouseLeave","App","activePt","setActivePt","setGridDensity","className","min","max","defaultValue","onChange","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.fac485bd.chunk.js","sourcesContent":["{\n  /* <palette>\n<color name='Illustration-1' rgb='BFCDD9' r='190' g='204' b='216' />\n<color name='Illustration-2' rgb='D9BD6A' r='216' g='189' b='106' />\n<color name='Illustration-3' rgb='F2DEA2' r='242' g='222' b='162' />\n<color name='Illustration-4' rgb='BF9B7A' r='191' g='154' b='122' />\n<color name='Illustration-5' rgb='734C36' r='114' g='76' b='53' />\n</palette> */\n}\n\nexport const colors = {\n  base: \"#F2FBFD\",\n  dark: \"#002C3E\",\n  a1: \"#049DD9\",\n  a2: \"#04B2D9\",\n  highlight: \"#F20544\",\n  highlight_dull: \"#FB93AF\"\n};\n","export const SQRT_3 = Math.sqrt(3);\n\nexport const isOdd = d => !!(d % 2);\n\nexport function* GridGenerator(nCols, nRows) {\n  let cStart, cEnd;\n  if (isOdd(nCols)) {\n    cStart = -(nCols - 1) / 2 - 1;\n    cEnd = (nCols - 1) / 2 + 1;\n  } else {\n    cStart = -nCols / 2 - 1;\n    cEnd = nCols / 2 + 1;\n  }\n\n  let rStart, rEnd;\n  if (isOdd(nRows)) {\n    rStart = -(nRows - 1) / 2;\n    rEnd = (nRows - 1) / 2 + 1;\n  } else {\n    rStart = -nRows / 2;\n    rEnd = nRows / 2 + 1;\n  }\n\n  for (let i = cStart; i < cEnd; i++) {\n    for (let j = rStart; j < rEnd; j++) {\n      yield [i, j];\n    }\n  }\n}\n","import { SQRT_3, GridGenerator, isOdd } from \"./utils\";\nimport * as d3 from \"d3\";\n\nclass KGrid {\n  constructor(width, height) {\n    this.width = width;\n    this.height = height;\n\n    this.setup2();\n  }\n\n  setup1() {\n    this.N_HEX_COLS = 7;\n    this.HEX_W = this.width / this.N_HEX_COLS;\n    this.F = this.HEX_W / (2 * SQRT_3);\n    this.H = this.HEX_W / SQRT_3;\n    this.G = this.HEX_W / 2;\n    this.N_HEX_ROWS = Math.ceil(this.height / (this.F + this.H));\n\n    this.createGrid();\n    this.createLines();\n  }\n\n  setup2() {\n    this.F = 20;\n    this.H = 2 * this.F;\n    this.G = SQRT_3 * this.F;\n\n    this.HEX_W = 2 * this.G;\n    this.N_HEX_COLS = Math.ceil(this.width / this.HEX_W);\n    this.N_HEX_ROWS = Math.ceil(this.height / (this.F + this.H));\n  }\n\n  genGrid(density = 1) {\n    const pts = [];\n    const lines = [];\n\n    // this.F = 20 / density;\n    // this.H = 2 * this.F;\n    // this.G = SQRT_3 * this.F;\n\n    // this.HEX_W = 2 * this.G;\n    // this.N_HEX_COLS = Math.ceil(this.width / this.HEX_W);\n    // this.N_HEX_ROWS = Math.ceil(this.height / (this.F + this.H));\n\n    for (const [i, j] of GridGenerator(this.N_HEX_COLS, this.N_HEX_ROWS)) {\n      let x0, ant, bat;\n      if (isOdd(j)) {\n        x0 = i * this.HEX_W + this.HEX_W / 2 + this.width / 2;\n        ant = (j + 1) / 2 + i;\n        bat = (1 - j) / 2 + i;\n      } else {\n        x0 = i * this.HEX_W + this.width / 2;\n        ant = j / 2 + i;\n        bat = i - j / 2;\n      }\n\n      for (let d = 0; d < 6; d++) {\n        const cat = j;\n        const dog = d;\n\n        const y0 = j * (this.F + this.H) + this.height / 2;\n\n        let dx, dy;\n        if (d === 0) {\n          dx = 0;\n          dy = 0;\n        } else {\n          const angle = ((-30 * d + 150) * Math.PI) / 180;\n          if (isOdd(d)) {\n            dx = this.G * Math.cos(angle);\n            dy = -this.G * Math.sin(angle);\n          } else {\n            dx = this.H * Math.cos(angle);\n            dy = -this.H * Math.sin(angle);\n          }\n        }\n\n        const xD = x0 + dx;\n        const yD = y0 + dy;\n\n        pts.push({\n          i,\n          j,\n          x: xD,\n          y: yD,\n          ant,\n          bat,\n          cat,\n          dog\n        });\n\n        // Gen Spokes\n        for (let d = 0; d < 12; d++) {\n          const angle = (d * 2 * Math.PI) / 12;\n\n          let dx, dy;\n\n          if (d % 2) {\n            dx = this.H * Math.cos(angle);\n            dy = -this.H * Math.sin(angle);\n          } else {\n            dx = this.G * Math.cos(angle);\n            dy = -this.G * Math.sin(angle);\n          }\n\n          lines.push([\n            [x0, y0],\n            [x0 + dx, y0 + dy]\n          ]);\n        }\n\n        // Gen Edges\n        // See Page 60 of notes\n        for (let d = 0; d < 6; d++) {\n          const angle1 = ((-30 * d + 150) * Math.PI) / 180;\n          const angle2 = ((-30 * (d + 1) + 150) * Math.PI) / 180;\n\n          let dx1, dy1, dx2, dy2;\n\n          if (d % 2) {\n            dx1 = this.G * Math.cos(angle1);\n            dy1 = -this.G * Math.sin(angle1);\n            dx2 = this.H * Math.cos(angle2);\n            dy2 = -this.H * Math.sin(angle2);\n          } else {\n            dx1 = this.H * Math.cos(angle1);\n            dy1 = -this.H * Math.sin(angle1);\n            dx2 = this.G * Math.cos(angle2);\n            dy2 = -this.G * Math.sin(angle2);\n          }\n\n          lines.push([\n            [x0 + dx1, y0 + dy1],\n            [x0 + dx2, y0 + dy2]\n          ]);\n        }\n      }\n    }\n\n    return {\n      pts,\n      lines\n    };\n  }\n\n  convertHexPointToCanvasPoint(kP) {\n    const j0 = kP.cat;\n    let i0, x0;\n    if (j0 % 2) {\n      i0 = kP.ant - (j0 + 1) / 2;\n      x0 = i0 * this.HEX_W + this.HEX_W / 2 + this.width / 2;\n    } else {\n      i0 = kP.ant - j0 / 2;\n      x0 = i0 * this.HEX_W + this.width / 2;\n    }\n\n    const y0 = (j0 * 3 * this.HEX_W) / (2 * SQRT_3) + this.height / 2;\n\n    let dx, dy;\n    if (kP.dog === 0) {\n      dx = 0;\n      dy = 0;\n    } else {\n      const angle = ((-30 * kP.dog + 150) * Math.PI) / 180;\n      if (kP.dog % 2) {\n        dx = this.G * Math.cos(angle);\n        dy = -this.G * Math.sin(angle);\n      } else {\n        dx = this.H * Math.cos(angle);\n        dy = -this.H * Math.sin(angle);\n      }\n    }\n\n    return [x0 + dx, y0 + dy];\n  }\n}\n\nclass KPoint {\n  constructor(ant, bat, cat, dog) {\n    this.ant = ant;\n    this.bat = bat;\n    this.cat = cat;\n    this.dog = dog;\n  }\n}\n\nexport class KPolygon {\n  constructor(pts) {\n    this.pts = pts;\n  }\n\n  draw(grid) {\n    var path = d3.path();\n\n    const pts = this.pts.map(pt =>\n      grid.convertHexPointToCanvasPoint({\n        ant: pt[0],\n        bat: pt[1],\n        cat: pt[2],\n        dog: pt[3]\n      })\n    );\n    if (pts.length) {\n      path.moveTo(pts[0][0], pts[0][1]);\n      for (let i = 0; i < pts.length; i++) {\n        path.lineTo(pts[i][0], pts[i][1]);\n      }\n      path.closePath();\n    }\n\n    return path.toString();\n  }\n}\n\nexport default KGrid;\n","import React, { useRef, useEffect, useState } from \"react\";\nimport * as d3 from \"d3\";\nimport { colors } from \"./colors\";\nimport * as R from \"ramda\";\nimport KGrid, { KPolygon } from \"./kcanvas\";\n\nconst Canvas = ({ gridDensity, mouseOver }) => {\n  const cRef = useRef();\n  const [width, setWidth] = useState(800);\n  const [height, setHeight] = useState(500);\n  const [points, setPoints] = useState([]);\n  const [kgrid, setKGrid] = useState(null);\n\n  const [shape, setShape] = useState([]);\n  const [activeIdx, setActiveIdx] = useState(null);\n\n  const shapes = [\n    {\n      pts: [\n        [1, 0, 1, 0],\n        [0, -1, 1, 0],\n        [-1, -1, 0, 0],\n        [-1, 0, -1, 0],\n        [0, 1, -1, 0],\n        [1, 1, 0, 0]\n      ],\n      color: \"red\"\n    },\n    {\n      pts: [\n        [-2, 2, -4, 0],\n        [-2, 0, -2, 0],\n        [0, 2, -2, 0]\n      ],\n      color: \"green\"\n    },\n    {\n      pts: [\n        [-2, -2, 0, 0],\n        [-2, -4, 2, 0],\n        [0, -2, 2, 0]\n      ],\n      color: \"green\"\n    },\n    {\n      pts: [\n        [2, 2, 0, 0],\n        [2, 0, 2, 0],\n        [4, 2, 2, 0]\n      ],\n      color: \"green\"\n    },\n    {\n      pts: [\n        [-1, 1, -2, 0],\n        [-2, 0, -2, 0],\n        [-2, -1, -1, 0],\n        [-1, -1, 0, 3],\n        [-1, 0, -1, 0],\n        [-1, 0, -1, 5]\n      ],\n      color: \"orange\"\n    }\n  ].map(shape => ({\n    color: shape.color,\n    polygon: new KPolygon(shape.pts)\n  }));\n\n  useEffect(() => {\n    const kgrid = new KGrid(width, height);\n\n    setKGrid(kgrid);\n\n    const shape = [\n      [1, 0, 1, 0],\n      [0, -1, 1, 0],\n      [-1, -1, 0, 0],\n      [-1, 0, -1, 0],\n      [0, 1, -1, 0],\n      [1, 1, 0, 0]\n    ];\n\n    const pts = [];\n    for (let kPt of shape) {\n      pts.push(\n        kgrid.convertHexPointToCanvasPoint({\n          ant: kPt[0],\n          bat: kPt[1],\n          cat: kPt[2],\n          dog: kPt[3]\n        })\n      );\n    }\n    setShape(pts);\n  }, []);\n\n  const setActive = (pt, idx) => {\n    mouseOver(pt);\n    setActiveIdx(idx);\n  };\n\n  if (!kgrid) return <div></div>;\n\n  const { pts, lines } = kgrid.genGrid(gridDensity);\n\n  const polygons = Object.entries(R.groupBy(d => `${d.i}.${d.j}`)(pts)).map(\n    ([k, v]) => {\n      var path = d3.path();\n      path.moveTo(v[0].x, v[0].y);\n      for (let i = 0; i < v.length; i++) {\n        path.lineTo(v[i].x, v[i].y);\n      }\n      path.closePath();\n\n      return path.toString();\n    }\n  );\n\n  var path = d3.path();\n  if (shape.length) {\n    path.moveTo(shape[0][0], shape[0][1]);\n    for (let i = 0; i < shape.length; i++) {\n      path.lineTo(shape[i][0], shape[i][1]);\n    }\n    path.closePath();\n  }\n\n  const shapePath = path.toString();\n\n  return (\n    <div>\n      <svg ref={cRef} width={width} height={height}>\n        {lines.map((line, idx) => (\n          <line\n            key={idx}\n            x1={line[0][0]}\n            y1={line[0][1]}\n            x2={line[1][0]}\n            y2={line[1][1]}\n            stroke={\"#eee\"}\n          />\n        ))}\n        {polygons.map((path, idx) => (\n          <path key={idx} d={path} fill={\"#eee\"} fillOpacity={0.5} />\n        ))}\n        {pts.map((pt, idx) => (\n          <circle\n            key={idx}\n            cx={pt.x}\n            cy={pt.y}\n            r={idx === activeIdx ? 5 : 2}\n            fill={idx === activeIdx ? colors.highlight : \"#ddd\"}\n          />\n        ))}\n\n        {shapes.map(({ polygon, color }, idx) => (\n          <path\n            key={idx}\n            d={polygon.draw(kgrid)}\n            fill={color}\n            fillOpacity={0.4}\n            stroke={\"black\"}\n            strokeWidth={3}\n          />\n        ))}\n        {pts.map((pt, idx) => (\n          <circle\n            key={idx}\n            cx={pt.x}\n            cy={pt.y}\n            r={6}\n            fill={\"black\"}\n            fillOpacity=\"0\"\n            onMouseOver={() => setActive(pt, idx)}\n            onMouseLeave={() => setActive(null)}\n          />\n        ))}\n      </svg>\n    </div>\n  );\n};\n\nexport default Canvas;\n","import React, { useState } from \"react\";\nimport { InputNumber } from \"antd\";\nimport Canvas from \"./canvas\";\n\nfunction App() {\n  const [activePt, setActivePt] = useState(null);\n  const [gridDensity, setGridDensity] = useState(1);\n  const mouseOver = pt => {\n    setActivePt(pt);\n  };\n\n  return (\n    <div>\n      <div className=\"mx-auto mt-10 shadow flex flex-row w-8/12\">\n        <Canvas gridDensity={gridDensity} mouseOver={mouseOver} />\n\n        <InputNumber\n          min={1}\n          max={4}\n          defaultValue={1}\n          onChange={setGridDensity}\n        />\n        {activePt && (\n          <ul>\n            <li>ANT: {activePt.ant}</li>\n            <li>BAT: {activePt.bat}</li>\n            <li>CAT: {activePt.cat}</li>\n            <li>DOG: {activePt.dog}</li>\n          </ul>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}