(this["webpackJsonphex-map"]=this["webpackJsonphex-map"]||[]).push([[0],{45:function(t,e,n){t.exports=n(57)},50:function(t,e,n){},57:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(37),o=n.n(i),c=(n(50),n(1)),u=n(38),s=n(7),l=n(10),h=n(21),f=n(22),m=n(27),v=n.n(m),d=v.a.mark(P),p=Math.sqrt(3),y=function(t){return!!(t%2)};function P(t,e){var n,a,r,i,o,c,u;return v.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:y(t)?(n=-(t-1)/2-1,a=(t-1)/2+1):(n=-t/2-1,a=t/2+1),y(e)?(r=-(e-1)/2,i=(e-1)/2+1):(r=-e/2,i=e/2+1),o=0,c=n;case 4:if(!(c<a)){s.next=16;break}u=r;case 6:if(!(u<i)){s.next=13;break}return s.next=9,[o,c,u];case 9:o++;case 10:u++,s.next=6;break;case 13:c++,s.next=4;break;case 16:case"end":return s.stop()}}),d)}var g=n(9),b=n(12),k=n(28),O=n(58),E=function(){function t(){Object(h.a)(this,t),this.kPoints=[],this.lines=[];var e=b.b().x((function(t){return t.x})).y((function(t){return t.y}));this.qTree=e}return Object(f.a)(t,[{key:"intitialize",value:function(t,e){this.width=t,this.height=e,this.setup()}},{key:"setup",value:function(){this.F=20,this.H=2*this.F,this.G=p*this.F,this.HEX_W=2*this.G,this.N_HEX_COLS=Math.ceil(this.width/this.HEX_W),this.N_HEX_ROWS=Math.ceil(this.height/(this.F+this.H)),this.genGrid()}},{key:"createKPoint",value:function(t){return Array.isArray(t)&&4===t.length&&(t=Object(k.zipObject)(["ant","bat","cat","dog"],t)),Object(k.find)(this.kPoints,t)}},{key:"genGrid",value:function(){var t=[],e=[],n=!0,a=!1,r=void 0;try{for(var i,o=P(this.N_HEX_COLS,this.N_HEX_ROWS)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var u=i.value,s=Object(c.a)(u,3),l=s[0],h=s[1],f=s[2],m=void 0,v=void 0,d=void 0;y(f)?(m=h*this.HEX_W+this.HEX_W/2,v=(f+1)/2+h,d=(1-f)/2+h):(m=h*this.HEX_W,v=f/2+h,d=h-f/2);for(var p=0;p<6;p++){var g=f,b=p,k=f*(this.F+this.H),O=void 0,E=void 0;if(0===p)O=0,E=0;else{var w=(-30*p+150)*Math.PI/180;y(p)?(O=this.G*Math.cos(w),E=-this.G*Math.sin(w)):(O=this.H*Math.cos(w),E=-this.H*Math.sin(w))}var M=m+O,K=k+E;t.push(j({idx:"".concat(l,".").concat(p),i:h,j:f,x:M,y:K,ant:v,bat:d,cat:g,dog:b},this));for(var x=0;x<12;x++){var S=2*x*Math.PI/12,H=void 0,C=void 0;x%2?(H=this.H*Math.cos(S),C=-this.H*Math.sin(S)):(H=this.G*Math.cos(S),C=-this.G*Math.sin(S)),e.push([[m,k],[m+H,k+C]])}for(var G=0;G<6;G++){var T=(-30*G+150)*Math.PI/180,A=(-30*(G+1)+150)*Math.PI/180,F=void 0,B=void 0,L=void 0,_=void 0;G%2?(F=this.G*Math.cos(T),B=-this.G*Math.sin(T),L=this.H*Math.cos(A),_=-this.H*Math.sin(A)):(F=this.H*Math.cos(T),B=-this.H*Math.sin(T),L=this.G*Math.cos(A),_=-this.G*Math.sin(A)),e.push([[m+F,k+B],[m+L,k+_]])}}}}catch(I){a=!0,r=I}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}this.qTree.addAll(t),this.kPoints=t,this.lines=e}},{key:"getGrid",value:function(){return{pts:this.kPoints,lines:this.lines}}}]),t}(),j=function(t,e){return t.rotate=function(n){var a=t.x,r=t.y,i=Math.sqrt(Math.pow(a,2)+Math.pow(r,2)),o=Math.atan2(r,a)+n,c=i*Math.cos(o),u=i*Math.sin(o);return e.qTree.find(c,u)},t.translate=function(n){var a=n.dAnt,r=void 0===a?0:a,i=n.dBat,o=void 0===i?0:i,c=n.dCat,u=void 0===c?0:c,s=n.dDog,l=void 0===s?0:s;return e.createKPoint({ant:t.ant+r,bat:t.bat+o,cat:t.cat+u,dog:t.dog+l})},t},w=function(){function t(e,n){Object(h.a)(this,t),this.kPoints=e,this.color=n}return Object(f.a)(t,[{key:"tMat",value:function(){var t=this.color.hull,e=this.kPoints,n=t.slice(0,3).map((function(t){return[t.x,t.y]})),a=e.slice(0,3).map((function(t){return[t.x,t.y]}));return Object(g.c)(n,a)}},{key:"copy",value:function(){return new t(this.kPoints,this.color)}},{key:"rotate",value:function(t){return this.kPoints=this.kPoints.map((function(e){return e.rotate(t)})),this}},{key:"translate",value:function(t){return this.kPoints=this.kPoints.map((function(e){return e.translate(t)})),this}},{key:"pathString",value:function(t){var e=b.a(),n=this.kPoints.map((function(t){return[t.x,t.y]})),a=t?Object(g.a)(t,n):n;return a.length&&(e.moveTo(a[0][0],a[0][1]),a.forEach((function(t){var n=Object(c.a)(t,2),a=n[0],r=n[1];return e.lineTo(a,r)})),e.closePath()),e.toString()}}]),t}(),M=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(h.a)(this,t),this.kPolygons=e,this.hull=n}return Object(f.a)(t,[{key:"add",value:function(t){this.kPolygons.push(t)}},{key:"copy",value:function(){return new t(this.kPolygons.map((function(t){return t.copy()})))}},{key:"rotate",value:function(t){return this.kPolygons=this.kPolygons.map((function(e){return e.rotate(t)})),this}},{key:"hullString",value:function(){var t=this.kPolygons.flatMap((function(t){return t.kPoints.map((function(t){return t}))})),e=Object(O.a)(t.map((function(t){return[t.x,t.y,t.idx]})));console.log(t,e,t.find((function(t){return"96.0"===t.idx})));var n=b.a();return this.hull.length&&(n.moveTo(this.hull[0].x,this.hull[0].y),this.hull.forEach((function(t){return n.lineTo(t.x,t.y)})),n.closePath()),n.toString()}},{key:"translate",value:function(t){return this.kPolygons=this.kPolygons.map((function(e){return e.translate(t)})),this}}]),t}(),K=E,x="#F20544",S="#F2528D",H="#1C418C",C="#F2B705",G="#F29F05",T="#F2C2C2",A=r.a.memo((function(t){var e=t.lines;return r.a.createElement(r.a.Fragment,null,e.map((function(t,e){return r.a.createElement("line",{key:e,x1:t[0][0],y1:t[0][1],x2:t[1][0],y2:t[1][1],stroke:"#eee"})})))})),F=r.a.memo((function(t){var e=t.points,n=t.activePoint;return r.a.createElement(r.a.Fragment,null,e.map((function(t,e){return r.a.createElement("circle",{key:e,cx:t.x,cy:t.y,r:3,fill:t===n?x:"#ddd"})})))})),B=function(t){for(var e=new w([t.createKPoint([1,0,1,0]),t.createKPoint([0,-1,1,0]),t.createKPoint([-1,-1,0,0]),t.createKPoint([-1,0,-1,0]),t.createKPoint([0,1,-1,0]),t.createKPoint([1,1,0,0])],S),n=new w([t.createKPoint([-2,2,-4,0]),t.createKPoint([-2,0,-2,0]),t.createKPoint([0,2,-2,0])],H),a=new w([t.createKPoint([-1,1,-2,0]),t.createKPoint([-2,0,-2,0]),t.createKPoint([-2,-1,-1,0]),t.createKPoint([-1,-1,0,3]),t.createKPoint([-1,0,-1,0]),t.createKPoint([-1,0,-1,5])],C),r=[e,n,a],i=1;i<6;i++)r.push(a.copy().rotate(60*i*Math.PI/180));for(var o=1;o<3;o++)r.push(n.copy().rotate(120*o*Math.PI/180));return new M(r,[t.createKPoint([-2,-4,2,0]),t.createKPoint([-2,2,-4,0]),t.createKPoint([4,2,2,0])])},L=[[-3,-2,-1,4],[-3,-1,-2,0],[-1,1,-2,0],[-1,0,-1,4],[-1,0,-1,2],[-2,-1,-1,4],[-2,-1,-1,2]],_=[[-2,-2,0,0],[-2,-2,0,1],[-2,-2,0,2],[-3,-2,-1,4],[-2,-1,-1,0],[-2,-1,-1,5],[-1,-1,0,2]],I=[[-2,-2,0,0],[-1,-1,0,2],[0,0,0,0]],W=[[0,0,0,0],[-1,-1,0,2],[-2,-1,-1,5],[-1,0,-1,0],[-1,0,-1,4],[0,0,0,2],[0,0,0,3]],X=[[-3,-2,-1,4],[-2,-1,-1,2],[-2,-1,-1,4],[-1,0,-1,2],[-1,0,-1,4],[-1,0,-1,0],[-2,-1,-1,0]],N=function(t){var e=new w(L.map((function(e){return t.createKPoint(e)})),S),n=new w(_.map((function(e){return t.createKPoint(e)})),H),a=new w(I.map((function(e){return t.createKPoint(e)})),C),r=new w(W.map((function(e){return t.createKPoint(e)})),G),i=new w(X.map((function(e){return t.createKPoint(e)})),T);return new M([e,n,a,r,i],[t.createKPoint([-2,-2,0,0]),t.createKPoint([-4,-2,-2,0]),t.createKPoint([0,2,-2,0]),t.createKPoint([0,0,0,0])])},R=function(t){var e=B(t),n=new w([[0,1,-1,0],[0,2,-2,0],[2,2,0,0],[1,1,0,0]].map((function(e){return t.createKPoint(e)})),N(t)),a=[new w([t.createKPoint([0,0,0,0]),t.createKPoint([0,1,-1,0]),t.createKPoint([1,1,0,0])],e),n],r=new M(a,[[0,0,0,0],[2,2,0,0],[0,2,-2,0]].map((function(e){return t.createKPoint(e)})));return new w([[0,0,0,0],[2,2,0,0],[0,2,-2,0]].map((function(e){return t.createKPoint(e)})),r)},q=function(t){for(var e=[R(t)],n=1;n<6;n++)e.push(e[0].copy().rotate(60*n*Math.PI/180));return new w([[2,2,0,0],[0,2,-2,0],[-2,0,-2,0],[-2,-2,0,0],[0,-2,2,0],[2,0,2,0]].map((function(e){return t.createKPoint(e)})),new M(e,[[2,2,0,0],[0,2,-2,0],[-2,0,-2,0],[-2,-2,0,0],[0,-2,2,0],[2,0,2,0]].map((function(e){return t.createKPoint(e)}))))},D=(r.a.memo((function(t){var e=t.kPolygonGroup;t.drawHull;return r.a.createElement("g",null,e.kPolygons.map((function(t,n){return r.a.createElement(D,{key:n,kPolygon:t,tMat:e.tMat})})))})),r.a.memo((function(t){var e,n=t.kPolygon,a=t.tMat;return n.color instanceof M?(e=a?Object(g.b)([a,n.tMat()]):n.tMat(),r.a.createElement(r.a.Fragment,null,n.color.kPolygons.map((function(t,n){return r.a.createElement(D,{key:n,kPolygon:t,tMat:e})})))):r.a.createElement("path",{d:n.pathString(a),fill:n.color,fillOpacity:1,stroke:"black",strokeWidth:3,strokeLinejoin:"round"})}))),z=function(t){var e=t.mouseOver,n=Object(a.useRef)(null),i=Object(a.useState)({width:800,height:500}),o=Object(c.a)(i,1)[0],u=Object(a.useState)(null),s=Object(c.a)(u,2),h=s[0],f=s[1],m=Object(a.useState)([]),v=Object(c.a)(m,2),d=(v[0],v[1]),p=Object(a.useState)([]),y=Object(c.a)(p,2),P=(y[0],y[1]),g=Object(a.useState)(new K),b=Object(c.a)(g,1)[0],k=Object(a.useState)([]),O=Object(c.a)(k,2),E=O[0],j=O[1],x=Object(a.useState)([]),S=Object(c.a)(x,2),H=S[0],C=S[1],G=function(t){var a=t.x,r=t.y,i=n.current.getBoundingClientRect(),c=i.x,u=i.y,s=b.qTree.find(a-c-o.width/2,r-u-o.height/2);s&&s!==h&&(f(s),e(s))},A=Object(a.useCallback)((function(t){var e=t.x,a=t.y,r=n.current.getBoundingClientRect(),i=r.x,c=r.y,u=b.qTree.find(e-i-o.width/2,a-c-o.height/2);C([].concat(Object(l.a)(H),[u]))}),[H]),F=function(t){"c"===t.key&&C([])};return Object(a.useEffect)((function(){var t=n.current.clientWidth,e=n.current.clientHeight;console.log("KGRID init"),b.intitialize(t,e);for(var a=n.current,r=new w([[-5,-6,1,4],[-5,-6,1,2],[-7,-5,-2,4],[-6,-4,-2,2],[-4,-3,-1,4],[-3,-3,0,2]].map((function(t){return b.createKPoint(t)})),T),i=new M([r],[[-5,-6,1,0],[-7,-4,-3,0],[-3,-2,-1,0]].map((function(t){return b.createKPoint(t)}))),o=[new w([[1,1,0,0],[2,3,-1,0],[3,2,1,0]].map((function(t){return b.createKPoint(t)})),i)],c=1;c<6;c++)o.push(o[0].copy().rotate(60*c*Math.PI/180));j([q(b),q(b).copy().translate({dAnt:-4,dBat:-2,dCat:-2}),q(b).copy().translate({dAnt:-2,dBat:-4,dCat:2}),q(b).copy().translate({dAnt:4,dBat:2,dCat:2}),q(b).copy().translate({dAnt:2,dBat:4,dCat:-2}),q(b).copy().translate({dAnt:2,dBat:-2,dCat:4})].concat(o));var u=b.getGrid(),s=u.pts,l=u.lines;return d(s),P(l),a.addEventListener("mousemove",G),window.addEventListener("keypress",F),function(){a.removeEventListener("mousemove",G),window.removeEventListener("keypress",F)}}),[]),Object(a.useEffect)((function(){var t=n.current;return t.addEventListener("click",A),function(){t.removeEventListener("click",A)}}),[A]),r.a.createElement("div",null,JSON.stringify(H.map((function(t){return[t.ant,t.bat,t.cat,t.dog]}))),r.a.createElement("svg",{ref:n,width:o.width,height:o.height},r.a.createElement("g",{transform:"translate(".concat(o.width/2,", ").concat(o.height/2,")")},E.map((function(t,e){return r.a.createElement(D,{key:e,kPolygon:t})})))))},J=r.a.memo((function(t){var e,n=t.kPolygon,i=t.tMat,o=Object(a.useState)(!1),u=Object(c.a)(o,2),s=u[0],l=u[1],h=Object(a.useState)(!1),f=Object(c.a)(h,2),m=f[0],v=f[1];return n.color instanceof M?(e=i?Object(g.b)([i,n.tMat()]):n.tMat(),r.a.createElement(r.a.Fragment,null,n.color.kPolygons.map((function(t,n){return r.a.createElement(J,{key:n,kPolygon:t,tMat:e})})))):r.a.createElement("path",{d:n.pathString(i),fill:m?"red":s?"orange":n.color,fillOpacity:.4,stroke:"black",strokeWidth:3,strokeLinejoin:"round",onMouseOver:function(){l(!0)},onMouseLeave:function(){l(!1)},onClick:function(t){t.preventDefault(),t.stopPropagation(),t.nativeEvent.stopImmediatePropagation(),v(!m)}})})),Y=function(t){t.mouseOver;var e=Object(a.useRef)(null),n=Object(a.useState)({width:800,height:500}),i=Object(c.a)(n,1)[0],o=Object(a.useState)(null),u=Object(c.a)(o,2),s=u[0],h=(u[1],Object(a.useState)([])),f=Object(c.a)(h,2),m=f[0],v=f[1],d=Object(a.useState)([]),p=Object(c.a)(d,2),y=p[0],P=p[1],g=Object(a.useState)(new K),k=Object(c.a)(g,1)[0],O=Object(a.useState)([]),E=Object(c.a)(O,2),j=E[0],M=E[1],x=Object(a.useState)([]),S=Object(c.a)(x,2),H=S[0],C=S[1],G=Object(a.useCallback)((function(t){var n=t.clientX,a=t.clientY,r=e.current.getBoundingClientRect(),o=r.x,c=r.y,u=k.qTree.find(n-o-i.width/2,a-c-i.height/2);u===H[0]?(M([].concat(Object(l.a)(j),[new w(H.map((function(t){return k.createKPoint(t)})),"blue")])),C([])):C([].concat(Object(l.a)(H),[u]))}),[H]),T=function(t){"c"===t.key&&C([])};Object(a.useEffect)((function(){var t=e.current.clientWidth,n=e.current.clientHeight;console.log("KGRID init"),k.intitialize(t,n);e.current;var a,r=k.getGrid(),i=r.pts,o=r.lines;return M([(a=k,new w([[1,1,0,0],[1,2,-1,0],[0,1,-1,0]].map((function(t){return a.createKPoint(t)})),"green"))]),v(i),P(o),window.addEventListener("keypress",T),function(){window.removeEventListener("keypress",T)}}),[]);var B=b.a(),L=H.map((function(t){return[t.x,t.y]}));L.length&&(B.moveTo(L[0][0],L[0][1]),L.forEach((function(t){var e=Object(c.a)(t,2),n=e[0],a=e[1];return B.lineTo(n,a)})),B.closePath());var _=B.toString();return r.a.createElement("div",null,JSON.stringify(H.map((function(t){return[t.ant,t.bat,t.cat,t.dog]}))),r.a.createElement("svg",{ref:e,width:i.width,height:i.height,onClick:G,onMouseMove:function(t){t.clientX,t.clientY}},r.a.createElement("g",{transform:"translate(".concat(i.width/2,", ").concat(i.height/2,")")},r.a.createElement(A,{lines:y}),r.a.createElement(F,{points:m,activePoint:s}),j.map((function(t,e){return r.a.createElement(J,{key:e,kPolygon:t})})),r.a.createElement("path",{d:_,stroke:"red",fill:"red",opacity:"0.3"}))))};var Q=function(){var t=Object(a.useState)(null),e=Object(c.a)(t,2),n=e[0],i=e[1],o=function(t){i(t)};return r.a.createElement(u.a,null,r.a.createElement("div",{className:"mx-auto mt-10 shadow flex flex-row w-8/12"},r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/page1"},r.a.createElement(Y,{mouseOver:o}),n&&r.a.createElement("ul",null,r.a.createElement("li",null,"ANT: ",n.ant),r.a.createElement("li",null,"BAT: ",n.bat),r.a.createElement("li",null,"CAT: ",n.cat),r.a.createElement("li",null,"DOG: ",n.dog))),r.a.createElement(s.a,{path:"/"},r.a.createElement(z,{mouseOver:o}),n&&r.a.createElement("ul",null,r.a.createElement("li",null,"ANT: ",n.ant),r.a.createElement("li",null,"BAT: ",n.bat),r.a.createElement("li",null,"CAT: ",n.cat),r.a.createElement("li",null,"DOG: ",n.dog))))))};o.a.render(r.a.createElement(Q,null),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.476cad8b.chunk.js.map